/*! For license information please see 723.825e785a.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[723],{6599:(e,t,n)=>{"use strict";n.d(t,{Mx:()=>H,Qr:()=>Y});class r{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=function(e){if("immediatePropagationStopped"in e)return e;{const{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}(e);for(const e of this.bindings){if(t.immediatePropagationStopped)break;e.handleEvent(t)}}get bindings(){return Array.from(this.unorderedBindings).sort(((e,t)=>{const n=e.index,r=t.index;return n<r?-1:n>r?1:0}))}}class i{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((e=>e.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((e=>e.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((e,t)=>e.concat(Array.from(t.values()))),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:n,eventOptions:r}=e;return this.fetchEventListener(t,n,r)}fetchEventListener(e,t,n){const r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,n);let s=r.get(i);return s||(s=this.createEventListener(e,t,n),r.set(i,s)),s}createEventListener(e,t,n){const i=new r(e,t,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const n=[e];return Object.keys(t).sort().forEach((e=>{n.push(`${t[e]?"":"!"}${e}`)})),n.join(":")}}const s=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;function o(e){return"window"==e?window:"document"==e?document:void 0}function a(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e){return e.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}class u{constructor(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){const t=e.tagName.toLowerCase();if(t in d)return d[t](e)}(e)||h("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||h("missing identifier"),this.methodName=n.methodName||h("missing method name")}static forToken(e){return new this(e.element,e.index,function(e){const t=e.trim().match(s)||[];return{eventTarget:o(t[4]),eventName:t[2],eventOptions:t[9]?(n=t[9],n.split(":").reduce(((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)})),{})):{},identifier:t[5],methodName:t[7]};var n}(e.content))}toString(){const e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}->${this.identifier}#${this.methodName}`}get params(){return this.eventTarget instanceof Element?this.getParamsFromEventTargetAttributes(this.eventTarget):{}}getParamsFromEventTargetAttributes(e){const t={},n=new RegExp(`^data-${this.identifier}-(.+)-param$`);return Array.from(e.attributes).forEach((({name:e,value:r})=>{const i=e.match(n),s=i&&i[1];s&&Object.assign(t,{[a(s)]:p(r)})})),t}get eventTargetName(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e}}const d={a:e=>"click",button:e=>"click",form:e=>"submit",details:e=>"toggle",input:e=>"submit"==e.getAttribute("type")?"click":"input",select:e=>"change",textarea:e=>"input"};function h(e){throw new Error(e)}function p(e){try{return JSON.parse(e)}catch(t){return e}}class m{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}invokeWithEvent(e){const{target:t,currentTarget:n}=e;try{const{params:r}=this.action,i=Object.assign(e,{params:r});this.method.call(this.controller,i),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(t){const{identifier:n,controller:r,element:i,index:s}=this,o={identifier:n,controller:r,element:i,index:s,event:e};this.context.handleError(t,`invoking action "${this.action}"`,o)}}willBeInvokedByEvent(e){const t=e.target;return this.element===t||(t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class g{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){const n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)}processRemovedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.processTree(e,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.elementIsActive(e)&&this.processTree(e,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class f{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new g(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}class v{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const n=this.delegate.getStringMapKeyForAttribute(e);if(null!=n){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);const r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,n,t),null==r){const t=this.stringMap.get(e);this.stringMap.delete(e),t&&this.stringMapKeyRemoved(n,e,t)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((e=>e.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}function y(e,t,n){w(e,t).add(n)}function b(e,t,n){w(e,t).delete(n),function(e,t){const n=e.get(t);null!=n&&0==n.size&&e.delete(t)}(e,t)}function w(e,t){let n=e.get(t);return n||(n=new Set,e.set(t,n)),n}class O{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e.concat(Array.from(t))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e+t.size),0)}add(e,t){y(this.valuesByKey,e,t)}delete(e,t){b(this.valuesByKey,e,t)}has(e,t){const n=this.valuesByKey.get(e);return null!=n&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some((t=>t.has(e)))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter((([t,n])=>n.has(e))).map((([e,t])=>e))}}class E{constructor(e,t,n){this.attributeObserver=new f(e,t,this),this.delegate=n,this.tokensByElement=new O}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach((e=>this.tokenMatched(e)))}tokensUnmatched(e){e.forEach((e=>this.tokenUnmatched(e)))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),r=function(e,t){const n=Math.max(e.length,t.length);return Array.from({length:n},((n,r)=>[e[r],t[r]]))}(t,n).findIndex((([e,t])=>{return r=t,!((n=e)&&r&&n.index==r.index&&n.content==r.content);var n,r}));return-1==r?[[],[]]:[t.slice(r),n.slice(r)]}readTokensForElement(e){const t=this.attributeName;return function(e,t,n){return e.trim().split(/\s+/).filter((e=>e.length)).map(((e,r)=>({element:t,attributeName:n,content:e,index:r})))}(e.getAttribute(t)||"",e,t)}}class A{constructor(e,t,n){this.tokenListObserver=new E(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}}class C{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new A(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new m(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach((e=>this.delegate.bindingDisconnected(e))),this.bindingsByAction.clear()}parseValueForToken(e){const t=u.forToken(e);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class S{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new v(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}start(){this.stringMapObserver.start()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){const r=this.valueDescriptorNameMap[t];null!==e&&(null===n&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){const r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),n):this.invokeChangedCallback(e,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:n,writer:r}of this.valueDescriptors)null==n||this.controller.data.has(e)||this.invokeChangedCallback(t,r(n),void 0)}invokeChangedCallback(e,t,n){const r=`${e}Changed`,i=this.receiver[r];if("function"==typeof i){const r=this.valueDescriptorNameMap[e],s=r.reader(t);let o=n;n&&(o=r.reader(n)),i.call(this.receiver,s,o)}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map((t=>e[t]))}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach((t=>{const n=this.valueDescriptorMap[t];e[n.name]=n})),e}hasValue(e){const t=`has${l(this.valueDescriptorNameMap[e].name)}`;return this.receiver[t]}}class k{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new O}start(){this.tokenListObserver||(this.tokenListObserver=new E(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(e,t))))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(e,t))))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}class x{constructor(e,t){this.logDebugActivity=(e,t={})=>{const{identifier:n,controller:r,element:i}=this;t=Object.assign({identifier:n,controller:r,element:i},t),this.application.logDebugActivity(this.identifier,e,t)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new C(this,this.dispatcher),this.valueObserver=new S(this,this.controller),this.targetObserver=new k(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(e){this.handleError(e,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){const{identifier:r,controller:i,element:s}=this;n=Object.assign({identifier:r,controller:i,element:s},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}invokeControllerMethod(e,...t){const n=this.controller;"function"==typeof n[e]&&n[e](...t)}}function T(e,t){const n=I(e);return Array.from(n.reduce(((e,n)=>(function(e,t){const n=e[t];return Array.isArray(n)?n:[]}(n,t).forEach((t=>e.add(t))),e)),new Set))}function M(e,t){return I(e).reduce(((e,n)=>(e.push(...function(e,t){const n=e[t];return n?Object.keys(n).map((e=>[e,n[e]])):[]}(n,t)),e)),[])}function I(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function L(e){return function(e,t){const n=N(e),r=function(e,t){return F(t).reduce(((n,r)=>{const i=function(e,t,n){const r=Object.getOwnPropertyDescriptor(e,n);if(!r||!("value"in r)){const e=Object.getOwnPropertyDescriptor(t,n).value;return r&&(e.get=r.get||e.get,e.set=r.set||e.set),e}}(e,t,r);return i&&Object.assign(n,{[r]:i}),n}),{})}(e.prototype,t);return Object.defineProperties(n.prototype,r),n}(e,function(e){return T(e,"blessings").reduce(((t,n)=>{const r=n(e);for(const e in r){const n=t[e]||{};t[e]=Object.assign(n,r[e])}return t}),{})}(e))}const F="function"==typeof Object.getOwnPropertySymbols?e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)]:Object.getOwnPropertyNames,N=(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return function(){const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t}(),e}catch(e){return e=>class extends e{}}})();class P{constructor(e,t){this.application=e,this.definition=function(e){return{identifier:e.identifier,controllerConstructor:L(e.controllerConstructor)}}(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new x(this,e),this.contextsByScope.set(e,t)),t}}class _{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return t.match(/[^\s]+/g)||[]}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class j{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${c(e)}`}}class D{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(n,e))}}function R(e,t){return`[${e}~="${t}"]`}class ${constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findTarget(t)||this.findLegacyTarget(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllTargets(t),...this.findAllLegacyTargets(t)]),[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){return R(this.schema.targetAttributeForScope(this.identifier),e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map((t=>this.deprecate(t,e)))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return R(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:n}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${n}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class B{constructor(e,t,n,r){this.targets=new $(this),this.classes=new _(this),this.data=new j(this),this.containsElement=e=>e.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new D(r)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return R(this.schema.controllerAttribute,this.identifier)}}class V{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new A(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:n}=e,r=this.fetchScopesByIdentifierForElement(t);let i=r.get(n);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,n),r.set(n,i)),i}elementMatchedValue(e,t){const n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class q{constructor(e){this.application=e,this.scopeObserver=new V(this.element,this.schema,this),this.scopesByIdentifier=new O,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((e,t)=>e.concat(t.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new P(this.application,e);this.connectModule(t)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find((t=>t.element==e))}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new B(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e);this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.connectContextForScope(t)))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier);this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.disconnectContextForScope(t)))}}const U={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:e=>`data-${e}-target`};class H{constructor(e=document.documentElement,t=U){this.logger=console,this.debug=!1,this.logDebugActivity=(e,t,n={})=>{this.debug&&this.logFormattedMessage(e,t,n)},this.element=e,this.schema=t,this.dispatcher=new i(this),this.router=new q(this)}static start(e,t){const n=new H(e,t);return n.start(),n}async start(){await new Promise((e=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>e())):e()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){t.shouldLoad&&this.load({identifier:e,controllerConstructor:t})}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.loadDefinition(e)))}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.unloadIdentifier(e)))}get controllers(){return this.router.contexts.map((e=>e.controller))}getControllerForElementAndIdentifier(e,t){const n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var r;this.logger.error("%s\n\n%o\n\n%o",t,e,n),null===(r=window.onerror)||void 0===r||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}function K([e,t]){return function(e,t){const n=`${c(e)}-value`,r=function(e){const t=function(e){const t=z(e.type);if(t){const n=G(e.default);if(t!==n)throw new Error(`Type "${t}" must match the type of the default value. Given default value: "${e.default}" as "${n}"`);return t}}(e),n=G(e),r=z(e),i=t||n||r;if(i)return i;throw new Error(`Unknown value type "${e}"`)}(t);return{type:r,key:n,name:a(n),get defaultValue(){return function(e){const t=z(e);if(t)return W[t];const n=e.default;return void 0!==n?n:e}(t)},get hasCustomDefaultValue(){return void 0!==G(t)},reader:J[r],writer:Q[r]||Q.default}}(e,t)}function z(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function G(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}const W={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},J={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError("Expected array");return t},boolean:e=>!("0"==e||"false"==e),number:e=>Number(e),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Expected object");return t},string:e=>e},Q={default:function(e){return`${e}`},array:X,object:X};function X(e){return JSON.stringify(e)}class Y{constructor(e){this.context=e}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:r=this.identifier,bubbles:i=!0,cancelable:s=!0}={}){const o=new CustomEvent(r?`${r}:${e}`:e,{detail:n,bubbles:i,cancelable:s});return t.dispatchEvent(o),o}}Y.blessings=[function(e){return T(e,"classes").reduce(((e,t)=>{return Object.assign(e,{[`${n=t}Class`]:{get(){const{classes:e}=this;if(e.has(n))return e.get(n);{const t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${l(n)}Class`]:{get(){return this.classes.has(n)}}});var n}),{})},function(e){return T(e,"targets").reduce(((e,t)=>{return Object.assign(e,{[`${n=t}Target`]:{get(){const e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${l(n)}Target`]:{get(){return this.targets.has(n)}}});var n}),{})},function(e){const t=M(e,"values"),n={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const n=K(t),r=this.data.getAttributeNameForKey(n.key);return Object.assign(e,{[r]:n})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,function(e){const t=K(e),{key:n,name:r,reader:i,writer:s}=t;return{[r]:{get(){const e=this.data.get(n);return null!==e?i(e):t.defaultValue},set(e){void 0===e?this.data.delete(n):this.data.set(n,s(e))}},[`has${l(r)}`]:{get(){return this.data.has(n)||t.hasCustomDefaultValue}}}}(t))),n)}],Y.targets=[],Y.values={}},2192:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(6599),i=n(8205);function s(e){return e.keys().map((t=>function(e,t){const n=function(e){const t=(e.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(t)return t.replace(/_/g,"-").replace(/\//g,"--")}(t);if(n)return function(e,t){const n=e.default;if("function"==typeof n)return{identifier:t,controllerConstructor:n}}(e(t),n)}(e,t))).filter((e=>e))}function o(e){const t=r.Mx.start();e&&t.load(s(e));for(const e in i.Z)i.Z.hasOwnProperty(e)&&i.Z[e].then((n=>{t.register(e,n.default)}));return t}},7816:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r,i,s,o,a,l,c,u,d=n(6599),h=n(4183),p=n.n(h);function m(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}class g extends d.Qr{constructor(){super(...arguments),r.add(this),this.isObserving=!1,this.hasLoadedChoicesPreviously=!1,this.originalOptions=[]}initialize(){this.mutationObserver||(this.mutationObserver=new MutationObserver((e=>{this.onMutations(e)})))}connect(){this.selectElement&&(this.originalOptions=this.createOptionsDataStructure(this.selectElement)),this.initializeTomSelect()}initializeTomSelect(){this.selectElement&&this.selectElement.setAttribute("data-skip-morph",""),this.urlValue?this.tomSelect=m(this,r,"m",a).call(this,this.urlValue,this.hasMinCharactersValue?this.minCharactersValue:null):this.optionsAsHtmlValue?this.tomSelect=m(this,r,"m",o).call(this):(this.tomSelect=m(this,r,"m",s).call(this),this.startMutationObserver())}disconnect(){this.stopMutationObserver();let e=[];this.selectElement&&(e=this.selectElement.multiple?Array.from(this.selectElement.options).filter((e=>e.selected)).map((e=>e.value)):[this.selectElement.value]),this.tomSelect.destroy(),this.selectElement&&(this.selectElement.multiple?Array.from(this.selectElement.options).forEach((t=>{t.selected=e.includes(t.value)})):this.selectElement.value=e[0])}getMaxOptions(){return this.selectElement?this.selectElement.options.length:50}get selectElement(){return this.element instanceof HTMLSelectElement?this.element:null}get formElement(){if(!(this.element instanceof HTMLInputElement||this.element instanceof HTMLSelectElement))throw new Error("Autocomplete Stimulus controller can only be used on an <input> or <select>.");return this.element}dispatchEvent(e,t){this.dispatch(e,{detail:t,prefix:"autocomplete"})}get preload(){return this.hasPreloadValue?"false"!=this.preloadValue&&("true"==this.preloadValue||this.preloadValue):"focus"}resetTomSelect(){if(this.tomSelect){this.stopMutationObserver();const e=this.element.innerHTML,t=this.tomSelect.getValue();this.tomSelect.destroy(),this.element.innerHTML=e,this.initializeTomSelect(),this.tomSelect.setValue(t),this.startMutationObserver()}}changeTomSelectDisabledState(e){this.stopMutationObserver(),e?this.tomSelect.disable():this.tomSelect.enable(),this.startMutationObserver()}startMutationObserver(){!this.isObserving&&this.mutationObserver&&(this.mutationObserver.observe(this.element,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.isObserving=!0)}stopMutationObserver(){this.isObserving&&this.mutationObserver&&(this.mutationObserver.disconnect(),this.isObserving=!1)}onMutations(e){let t=!1,n=!1;e.forEach((e=>{switch(e.type){case"attributes":if(e.target===this.element&&"disabled"===e.attributeName){t=!0;break}if(e.target===this.element&&"multiple"===e.attributeName){n=!0;break}}}));const r=this.selectElement?this.createOptionsDataStructure(this.selectElement):[];this.areOptionsEquivalent(r)&&!n||(this.originalOptions=r,this.resetTomSelect()),t&&this.changeTomSelectDisabledState(this.formElement.disabled)}createOptionsDataStructure(e){return Array.from(e.options).map((e=>{const t=e.closest("optgroup");return{value:e.value,text:e.text,group:t?t.label:null}}))}areOptionsEquivalent(e){if(this.originalOptions.length!==e.length)return!1;const t=e=>`${e.value}-${e.text}-${e.group}`,n=new Set(this.originalOptions.map(t)),r=new Set(e.map(t));return n.size===r.size&&[...n].every((e=>r.has(e)))}}r=new WeakSet,i=function(){const e={},t=!this.selectElement||this.selectElement.multiple;this.formElement.disabled||t||(e.clear_button={title:""}),t&&(e.remove_button={title:""}),this.urlValue&&(e.virtual_scroll={});const n={render:{no_results:()=>`<div class="no-results">${this.noResultsFoundTextValue}</div>`},plugins:e,onItemAdd:()=>{this.tomSelect.setTextboxValue("")},closeAfterSelect:!0};return this.selectElement||this.urlValue||(n.shouldLoad=()=>!1),m(this,r,"m",c).call(this,n,this.tomSelectOptionsValue)},s=function(){const e=m(this,r,"m",c).call(this,m(this,r,"m",i).call(this),{maxOptions:this.getMaxOptions()});return m(this,r,"m",u).call(this,e)},o=function(){const e=m(this,r,"m",c).call(this,m(this,r,"m",i).call(this),{maxOptions:this.getMaxOptions(),score:e=>{const t=this.tomSelect.getScoreFunction(e);return e=>t(Object.assign(Object.assign({},e),{text:m(this,r,"m",l).call(this,e.text)}))},render:{item:function(e){return`<div>${e.text}</div>`},option:function(e){return`<div>${e.text}</div>`}}});return m(this,r,"m",u).call(this,e)},a=function(e,t){const n=m(this,r,"m",c).call(this,m(this,r,"m",i).call(this),{firstUrl:t=>{const n=e.includes("?")?"&":"?";return`${e}${n}query=${encodeURIComponent(t)}`},load:function(e,t){const n=this.getUrl(e);fetch(n).then((e=>e.json())).then((n=>{this.setNextUrl(e,n.next_page),t(n.results.options||n.results,n.results.optgroups||[])})).catch((()=>t([],[])))},shouldLoad:e=>null!==t?e.length>=t:!!this.hasLoadedChoicesPreviously||(e.length>0&&(this.hasLoadedChoicesPreviously=!0),e.length>=3),optgroupField:"group_by",score:function(e){return function(e){return 1}},render:{option:function(e){return`<div>${e.text}</div>`},item:function(e){return`<div>${e.text}</div>`},loading_more:()=>`<div class="loading-more-results">${this.loadingMoreTextValue}</div>`,no_more_results:()=>`<div class="no-more-results">${this.noMoreResultsTextValue}</div>`,no_results:()=>`<div class="no-results">${this.noResultsFoundTextValue}</div>`},preload:this.preload});return m(this,r,"m",u).call(this,n)},l=function(e){return e.replace(/(<([^>]+)>)/gi,"")},c=function(e,t){return Object.assign(Object.assign({},e),t)},u=function(e){const t={options:e};this.dispatchEvent("pre-connect",t);const n=new(p())(this.formElement,e),r={tomSelect:n,options:e};return this.dispatchEvent("connect",r),n},g.values={url:String,optionsAsHtml:Boolean,loadingMoreText:String,noResultsFoundText:String,noMoreResultsText:String,minCharacters:Number,tomSelectOptions:Object,preload:String}},2162:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6599);class i extends r.Qr{connect(){this.clear(),this.previewClearButtonTarget.addEventListener("click",(()=>this.clear())),this.inputTarget.addEventListener("change",(e=>this.onInputChange(e))),this.dispatchEvent("connect")}clear(){this.inputTarget.value="",this.inputTarget.style.display="block",this.placeholderTarget.style.display="block",this.previewTarget.style.display="none",this.previewImageTarget.style.display="none",this.previewImageTarget.style.backgroundImage="none",this.previewFilenameTarget.textContent="",this.dispatchEvent("clear")}onInputChange(e){const t=e.target.files[0];void 0!==t&&(this.inputTarget.style.display="none",this.placeholderTarget.style.display="none",this.previewFilenameTarget.textContent=t.name,this.previewTarget.style.display="flex",this.previewImageTarget.style.display="none",t.type&&-1!==t.type.indexOf("image")&&this._populateImagePreview(t),this.dispatchEvent("change",t))}_populateImagePreview(e){if("undefined"==typeof FileReader)return;const t=new FileReader;t.addEventListener("load",(e=>{this.previewImageTarget.style.display="block",this.previewImageTarget.style.backgroundImage='url("'+e.target.result+'")'})),t.readAsDataURL(e)}dispatchEvent(e,t={}){this.dispatch(e,{detail:t,prefix:"dropzone"})}}i.targets=["input","placeholder","preview","previewClearButton","previewFilename","previewImage"]},6500:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>R,default:()=>Y,getComponent:()=>X});var r=n(6599);function i(e){const t=[];if(!e)return t;let n="",r="",i="",s=[],o={},a=[],l="action";const c=function(){if(n)return n;if(0===t.length)throw new Error("Could not find any directives");return t[t.length-1].action},u=function(){t.push({action:n,args:s,named:o,modifiers:a,getString:()=>e}),n="",r="",i="",s=[],o={},a=[],l="action"},d=function(){const e=()=>{throw new Error(`Normal and named arguments cannot be mixed inside "${n}()"`)};r?(s.length>0&&e(),o[r.trim()]=i):(Object.keys(o).length>0&&e(),s.push(i.trim())),r="",i=""},h=function(){if(s.length>1)throw new Error(`The modifier "${n}()" does not support multiple arguments.`);if(Object.keys(o).length>0)throw new Error(`The modifier "${n}()" does not support named arguments.`);a.push({name:n,value:s.length>0?s[0]:null}),n="",r="",s=[],l="action"};for(let t=0;t<e.length;t++){const s=e[t];switch(l){case"action":if("("===s){l="arguments";break}if(" "===s){n&&u();break}if("|"===s){h();break}n+=s;break;case"arguments":if(")"===s){d(),l="after_arguments";break}if(","===s){d();break}if("="===s){r=i,i="";break}i+=s;break;case"after_arguments":if("|"===s){h();break}if(" "!==s)throw new Error(`Missing space after ${c()}()`);u()}}switch(l){case"action":case"after_arguments":n&&u();break;default:throw new Error(`Did you forget to add a closing ")" after "${n}"?`)}return t}function s(e){const t=[];return e.forEach((e=>{t.push(...e.split(" "))})),t}function o(e){return e.replace(/\[]$/,"").split("[").map((function(e){return e.replace("]","")})).join(".")}function a(e,t){if(e instanceof HTMLInputElement){if("checkbox"===e.type){const n=u(e,!1);if(null!==n){const r=t.get(n.action);if(Array.isArray(r))return m(e,r);if(Object(r)===r)return m(e,Object.values(r))}return e.hasAttribute("value")?e.checked?e.getAttribute("value"):null:e.checked}return g(e)}return e instanceof HTMLSelectElement?e.multiple?Array.from(e.selectedOptions).map((e=>e.value)):e.value:e.dataset.value?e.dataset.value:"value"in e?e.value:e.hasAttribute("value")?e.getAttribute("value"):null}function l(e,t){if(e instanceof HTMLInputElement){if("file"===e.type)return;if("radio"===e.type)return void(e.checked=e.value==t);if("checkbox"===e.type){if(Array.isArray(t)){let n=!1;t.forEach((t=>{t==e.value&&(n=!0)})),e.checked=n}else e.hasAttribute("value")?e.checked=e.value==t:e.checked=t;return}}if(e instanceof HTMLSelectElement){const n=[].concat(t).map((e=>e+""));Array.from(e.options).forEach((e=>{e.selected=n.includes(e.value)}))}else t=void 0===t?"":t,e.value=t}function c(e){if(!e.dataset.model)return[];const t=i(e.dataset.model);return t.forEach((t=>{if(t.args.length>0||t.named.length>0)throw new Error(`The data-model="${e.dataset.model}" format is invalid: it does not support passing arguments to the model.`);t.action=o(t.action)})),t}function u(e,t=!0){const n=c(e);if(n.length>0)return n[0];if(e.getAttribute("name")){const t=e.closest("form");if(t&&"model"in t.dataset){const n=i(t.dataset.model||"*")[0];if(n.args.length>0||n.named.length>0)throw new Error(`The data-model="${t.dataset.model}" format is invalid: it does not support passing arguments to the model.`);return n.action=o(e.getAttribute("name")),n}}if(!t)return null;throw new Error(`Cannot determine the model name for "${p(e)}": the element must either have a "data-model" (or "name" attribute living inside a <form data-model="*">).`)}function d(e,t){if(t.element===e)return!0;if(!t.element.contains(e))return!1;let n=!1;return t.getChildren().forEach((t=>{n||(t.element===e||t.element.contains(e))&&(n=!0)})),!n}function h(e){const t=e.cloneNode(!0);if(!(t instanceof HTMLElement))throw new Error("Could not clone element");return t}function p(e){return e.innerHTML?e.outerHTML.slice(0,e.outerHTML.indexOf(e.innerHTML)):e.outerHTML}const m=function(e,t){const n=[...t],r=g(e),i=t.indexOf(r);return e.checked?(-1===i&&n.push(r),n):(i>-1&&n.splice(i,1),n)},g=function(e){return e.dataset.value?e.dataset.value:e.value};const f=function(e,t){const n=JSON.parse(JSON.stringify(e));let r=n;const i=t.split(".");for(let e=0;e<i.length-1;e++)r=r[i[e]];return{currentLevelData:r,finalData:n,finalKey:i[i.length-1],parts:i}};class v{constructor(e){this.props={},this.dirtyProps={},this.pendingProps={},this.updatedPropsFromParent={},this.props=e}get(e){const t=o(e);return void 0!==this.dirtyProps[t]?this.dirtyProps[t]:void 0!==this.pendingProps[t]?this.pendingProps[t]:void 0!==this.props[t]?this.props[t]:function(e,t){const{currentLevelData:n,finalKey:r}=f(e,t);if(void 0!==n)return n[r]}(this.props,t)}has(e){return void 0!==this.get(e)}set(e,t){const n=o(e);return this.get(n)!==t&&(this.dirtyProps[n]=t,!0)}getOriginalProps(){return Object.assign({},this.props)}getDirtyProps(){return Object.assign({},this.dirtyProps)}getUpdatedPropsFromParent(){return Object.assign({},this.updatedPropsFromParent)}flushDirtyPropsToPending(){this.pendingProps=Object.assign({},this.dirtyProps),this.dirtyProps={}}reinitializeAllProps(e){this.props=e,this.updatedPropsFromParent={},this.pendingProps={}}pushPendingPropsBackToDirty(){this.dirtyProps=Object.assign(Object.assign({},this.pendingProps),this.dirtyProps),this.pendingProps={}}storeNewPropsFromParent(e){let t=!1;for(const[n,r]of Object.entries(e)){this.get(n)!==r&&(t=!0)}return t&&(this.updatedPropsFromParent=e),t}}var y;var b="undefined"==typeof document?void 0:document,w=!!b&&"content"in b.createElement("template"),O=!!b&&b.createRange&&"createContextualFragment"in b.createRange();function E(e){return e=e.trim(),w?function(e){var t=b.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(e):O?function(e){return y||(y=b.createRange()).selectNode(b.body),y.createContextualFragment(e).childNodes[0]}(e):function(e){var t=b.createElement("body");return t.innerHTML=e,t.childNodes[0]}(e)}function A(e,t){var n,r,i=e.nodeName,s=t.nodeName;return i===s||(n=i.charCodeAt(0),r=s.charCodeAt(0),n<=90&&r>=97?i===s.toUpperCase():r<=90&&n>=97&&s===i.toUpperCase())}function C(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var S={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}C(e,t,"selected")},INPUT:function(e,t){C(e,t,"checked"),C(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var i=r.nodeValue;if(i==n||!n&&i==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,i=-1,s=0,o=e.firstChild;o;)if("OPTGROUP"===(r=o.nodeName&&o.nodeName.toUpperCase()))o=(n=o).firstChild;else{if("OPTION"===r){if(o.hasAttribute("selected")){i=s;break}s++}!(o=o.nextSibling)&&n&&(o=n.nextSibling,n=null)}e.selectedIndex=i}}};function k(){}function x(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var T=function(e){return function(t,n,r){if(r||(r={}),"string"==typeof n)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var i=n;(n=b.createElement("html")).innerHTML=i}else n=E(n);else 11===n.nodeType&&(n=n.firstElementChild);var s=r.getNodeKey||x,o=r.onBeforeNodeAdded||k,a=r.onNodeAdded||k,l=r.onBeforeElUpdated||k,c=r.onElUpdated||k,u=r.onBeforeNodeDiscarded||k,d=r.onNodeDiscarded||k,h=r.onBeforeElChildrenUpdated||k,p=r.skipFromChildren||k,m=r.addChild||function(e,t){return e.appendChild(t)},g=!0===r.childrenOnly,f=Object.create(null),v=[];function y(e){v.push(e)}function w(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var r=void 0;t&&(r=s(n))?y(r):(d(n),n.firstChild&&w(n,t)),n=n.nextSibling}}function O(e,t,n){!1!==u(e)&&(t&&t.removeChild(e),d(e),w(e,n))}function C(e){a(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=s(t);if(r){var i=f[r];i&&A(t,i)?(t.parentNode.replaceChild(i,t),T(i,t)):C(t)}else C(t);t=n}}function T(t,n,r){var i=s(n);if(i&&delete f[i],!r){if(!1===l(t,n))return;if(e(t,n),c(t),!1===h(t,n))return}"TEXTAREA"!==t.nodeName?function(e,t){var n,r,i,a,l,c=p(e),u=t.firstChild,d=e.firstChild;e:for(;u;){for(a=u.nextSibling,n=s(u);!c&&d;){if(i=d.nextSibling,u.isSameNode&&u.isSameNode(d)){u=a,d=i;continue e}r=s(d);var h=d.nodeType,g=void 0;if(h===u.nodeType&&(1===h?(n?n!==r&&((l=f[n])?i===l?g=!1:(e.insertBefore(l,d),r?y(r):O(d,e,!0),d=l):g=!1):r&&(g=!1),(g=!1!==g&&A(d,u))&&T(d,u)):3!==h&&8!=h||(g=!0,d.nodeValue!==u.nodeValue&&(d.nodeValue=u.nodeValue))),g){u=a,d=i;continue e}r?y(r):O(d,e,!0),d=i}if(n&&(l=f[n])&&A(l,u))c||m(e,l),T(l,u);else{var v=o(u);!1!==v&&(v&&(u=v),u.actualize&&(u=u.actualize(e.ownerDocument||b)),m(e,u),C(u))}u=a,d=i}!function(e,t,n){for(;t;){var r=t.nextSibling;(n=s(t))?y(n):O(t,e,!0),t=r}}(e,d,r);var w=S[e.nodeName];w&&w(e,t)}(t,n):S.TEXTAREA(t,n)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var r=s(n);r&&(f[r]=n),e(n),n=n.nextSibling}}(t);var M,I,L=t,F=L.nodeType,N=n.nodeType;if(!g)if(1===F)1===N?A(t,n)||(d(t),L=function(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}(t,(M=n.nodeName,(I=n.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==I?b.createElementNS(I,M):b.createElement(M)))):L=n;else if(3===F||8===F){if(N===F)return L.nodeValue!==n.nodeValue&&(L.nodeValue=n.nodeValue),L;L=n}if(L===n)d(t);else{if(n.isSameNode&&n.isSameNode(L))return;if(T(L,n,g),v)for(var P=0,_=v.length;P<_;P++){var j=f[v[P]];j&&O(j,j.parentNode,!1)}}return!g&&L!==t&&t.parentNode&&(L.actualize&&(L=L.actualize(t.ownerDocument||b)),t.parentNode.replaceChild(L,t)),L}}((function(e,t){var n,r,i,s,o=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var a=o.length-1;a>=0;a--)r=(n=o[a]).name,i=n.namespaceURI,s=n.value,i?(r=n.localName||r,e.getAttributeNS(i,r)!==s&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(i,r,s))):e.getAttribute(r)!==s&&e.setAttribute(r,s);for(var l=e.attributes,c=l.length-1;c>=0;c--)r=(n=l[c]).name,(i=n.namespaceURI)?(r=n.localName||r,t.hasAttributeNS(i,r)||e.removeAttributeNS(i,r)):t.hasAttribute(r)||e.removeAttribute(r)}}));function M(e){e instanceof HTMLInputElement&&"file"===e.type||("value"in e?e.setAttribute("value",e.value):e.hasAttribute("value")&&e.setAttribute("value","")),Array.from(e.children).forEach((e=>{M(e)}))}class I{constructor(e,t){this.elementEventListeners=[{event:"input",callback:e=>this.handleInputEvent(e)}],this.component=e,this.modelElementResolver=t,this.unsyncedInputs=new L}activate(){this.elementEventListeners.forEach((({event:e,callback:t})=>{this.component.element.addEventListener(e,t)}))}deactivate(){this.elementEventListeners.forEach((({event:e,callback:t})=>{this.component.element.removeEventListener(e,t)}))}markModelAsSynced(e){this.unsyncedInputs.markModelAsSynced(e)}handleInputEvent(e){const t=e.target;t&&this.updateModelFromElement(t)}updateModelFromElement(e){if(!d(e,this.component))return;if(!(e instanceof HTMLElement))throw new Error("Could not update model for non HTMLElement");const t=this.modelElementResolver.getModelName(e);this.unsyncedInputs.add(e,t)}getUnsyncedInputs(){return this.unsyncedInputs.allUnsyncedInputs()}getUnsyncedModels(){return Array.from(this.unsyncedInputs.getUnsyncedModelNames())}resetUnsyncedFields(){this.unsyncedInputs.resetUnsyncedFields()}}class L{constructor(){this.unsyncedNonModelFields=[],this.unsyncedModelNames=[],this.unsyncedModelFields=new Map}add(e,t=null){if(t)return this.unsyncedModelFields.set(t,e),void(this.unsyncedModelNames.includes(t)||this.unsyncedModelNames.push(t));this.unsyncedNonModelFields.push(e)}resetUnsyncedFields(){this.unsyncedModelFields.forEach(((e,t)=>{this.unsyncedModelNames.includes(t)||this.unsyncedModelFields.delete(t)}))}allUnsyncedInputs(){return[...this.unsyncedNonModelFields,...this.unsyncedModelFields.values()]}markModelAsSynced(e){const t=this.unsyncedModelNames.indexOf(e);-1!==t&&this.unsyncedModelNames.splice(t,1)}getUnsyncedModelNames(){return this.unsyncedModelNames}}class F{constructor(){this.hooks=new Map}register(e,t){const n=this.hooks.get(e)||[];n.push(t),this.hooks.set(e,n)}unregister(e,t){const n=this.hooks.get(e)||[],r=n.indexOf(t);-1!==r&&(n.splice(r,1),this.hooks.set(e,n))}triggerHook(e,...t){(this.hooks.get(e)||[]).forEach((e=>{e(...t)}))}}class N{constructor(e){this.response=e}async getBody(){return this.body||(this.body=await this.response.text()),this.body}}class P{constructor(){this.changedItems=new Map,this.removedItems=new Map}setItem(e,t,n){if(this.removedItems.has(e)){const n=this.removedItems.get(e);if(this.removedItems.delete(e),n.original===t)return}if(this.changedItems.has(e)){const n=this.changedItems.get(e);return n.original===t?void this.changedItems.delete(e):void this.changedItems.set(e,{original:n.original,new:t})}this.changedItems.set(e,{original:n,new:t})}removeItem(e,t){let n=t;if(this.changedItems.has(e)){if(n=this.changedItems.get(e).original,this.changedItems.delete(e),null===n)return}this.removedItems.has(e)||this.removedItems.set(e,{original:n})}getChangedItems(){const e=[];return this.changedItems.forEach(((t,n)=>{e.push({name:n,value:t.new})})),e}getRemovedItems(){const e=[];return this.removedItems.forEach(((t,n)=>{e.push(n)})),e}isEmpty(){return 0===this.changedItems.size&&0===this.removedItems.size}}class _{constructor(){this.addedClasses=[],this.removedClasses=[],this.styleChanges=new P,this.attributeChanges=new P}addClass(e){this.removedClasses.includes(e)?this.removedClasses=this.removedClasses.filter((t=>t!==e)):this.addedClasses.includes(e)||this.addedClasses.push(e)}removeClass(e){this.addedClasses.includes(e)?this.addedClasses=this.addedClasses.filter((t=>t!==e)):this.removedClasses.includes(e)||this.removedClasses.push(e)}addStyle(e,t,n){this.styleChanges.setItem(e,t,n)}removeStyle(e,t){this.styleChanges.removeItem(e,t)}addAttribute(e,t,n){this.attributeChanges.setItem(e,t,n)}removeAttribute(e,t){this.attributeChanges.removeItem(e,t)}getAddedClasses(){return this.addedClasses}getRemovedClasses(){return this.removedClasses}getChangedStyles(){return this.styleChanges.getChangedItems()}getRemovedStyles(){return this.styleChanges.getRemovedItems()}getChangedAttributes(){return this.attributeChanges.getChangedItems()}getRemovedAttributes(){return this.attributeChanges.getRemovedItems()}applyToElement(e){this.addedClasses.forEach((t=>{e.classList.add(t)})),this.removedClasses.forEach((t=>{e.classList.remove(t)})),this.styleChanges.getChangedItems().forEach((t=>{e.style.setProperty(t.name,t.value)})),this.styleChanges.getRemovedItems().forEach((t=>{e.style.removeProperty(t)})),this.attributeChanges.getChangedItems().forEach((t=>{e.setAttribute(t.name,t.value)})),this.attributeChanges.getRemovedItems().forEach((t=>{e.removeAttribute(t)}))}isEmpty(){return 0===this.addedClasses.length&&0===this.removedClasses.length&&this.styleChanges.isEmpty()&&this.attributeChanges.isEmpty()}}class j{constructor(e,t){this.changedElements=new WeakMap,this.changedElementsCount=0,this.addedElements=[],this.removedElements=[],this.isStarted=!1,this.element=e,this.shouldTrackChangeCallback=t,this.mutationObserver=new MutationObserver(this.onMutations.bind(this))}start(){this.isStarted||(this.mutationObserver.observe(this.element,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0}),this.isStarted=!0)}stop(){this.isStarted&&(this.mutationObserver.disconnect(),this.isStarted=!1)}getChangedElement(e){return this.changedElements.has(e)?this.changedElements.get(e):null}getAddedElements(){return this.addedElements}wasElementAdded(e){return this.addedElements.includes(e)}handlePendingChanges(){this.onMutations(this.mutationObserver.takeRecords())}onMutations(e){const t=new WeakMap;for(const n of e){const e=n.target;if(!this.shouldTrackChangeCallback(e))continue;if(this.isElementAddedByTranslation(e))continue;let r=!1;for(const t of this.addedElements)if(t.contains(e)){r=!0;break}if(!r)switch(n.type){case"childList":this.handleChildListMutation(n);break;case"attributes":t.has(e)||t.set(e,[]),t.get(e).includes(n.attributeName)||(this.handleAttributeMutation(n),t.set(e,[...t.get(e),n.attributeName]))}}}handleChildListMutation(e){e.addedNodes.forEach((e=>{e instanceof Element&&(this.removedElements.includes(e)?this.removedElements.splice(this.removedElements.indexOf(e),1):this.isElementAddedByTranslation(e)||this.addedElements.push(e))})),e.removedNodes.forEach((e=>{e instanceof Element&&(this.addedElements.includes(e)?this.addedElements.splice(this.addedElements.indexOf(e),1):this.removedElements.push(e))}))}handleAttributeMutation(e){const t=e.target;this.changedElements.has(t)||(this.changedElements.set(t,new _),this.changedElementsCount++);const n=this.changedElements.get(t);switch(e.attributeName){case"class":this.handleClassAttributeMutation(e,n);break;case"style":this.handleStyleAttributeMutation(e,n);break;default:this.handleGenericAttributeMutation(e,n)}n.isEmpty()&&(this.changedElements.delete(t),this.changedElementsCount--)}handleClassAttributeMutation(e,t){const n=e.target,r=e.oldValue,i=r?r.split(" "):[];i.forEach(((e,t)=>{const n=e.trim();""!==n?i[t]=n:i.splice(t,1)}));const s=[].slice.call(n.classList),o=s.filter((e=>!i.includes(e))),a=i.filter((e=>!s.includes(e)));o.forEach((e=>{t.addClass(e)})),a.forEach((e=>{t.removeClass(e)}))}handleStyleAttributeMutation(e,t){const n=e.target,r=e.oldValue||"",i=this.extractStyles(r),s=n.getAttribute("style")||"",o=this.extractStyles(s),a=Object.keys(o).filter((e=>void 0===i[e]||i[e]!==o[e])),l=Object.keys(i).filter((e=>!o[e]));a.forEach((e=>{t.addStyle(e,o[e],void 0===i[e]?null:i[e])})),l.forEach((e=>{t.removeStyle(e,i[e])}))}handleGenericAttributeMutation(e,t){const n=e.attributeName,r=e.target;let i=e.oldValue,s=r.getAttribute(n);if(i===n&&(i=""),s===n&&(s=""),r.hasAttribute(n))s!==i&&t.addAttribute(n,r.getAttribute(n),e.oldValue);else{if(null===i)return;t.removeAttribute(n,e.oldValue)}}extractStyles(e){const t={};return e.split(";").forEach((e=>{const n=e.split(":");if(1===n.length)return;const r=n[0].trim();t[r]=n.slice(1).join(":").trim()})),t}isElementAddedByTranslation(e){return"FONT"===e.tagName&&"vertical-align: inherit;"===e.getAttribute("style")}}class D{constructor(e,t){this.component=e,this.modelBindings=t}}class R{constructor(e,t,n,r,i,s,o,a,l){this.defaultDebounce=150,this.backendRequest=null,this.pendingActions=[],this.pendingFiles={},this.isRequestPending=!1,this.requestDebounceTimeout=null,this.children=new Map,this.parent=null,this.element=e,this.name=t,this.componentFinder=i,this.backend=a,this.elementDriver=l,this.id=o,this.fingerprint=s,this.listeners=new Map,r.forEach((e=>{var t;this.listeners.has(e.event)||this.listeners.set(e.event,[]),null===(t=this.listeners.get(e.event))||void 0===t||t.push(e.action)})),this.valueStore=new v(n),this.unsyncedInputsTracker=new I(this,l),this.hooks=new F,this.resetPromise(),this.externalMutationTracker=new j(this.element,(e=>d(e,this))),this.externalMutationTracker.start(),this.onChildComponentModelUpdate=this.onChildComponentModelUpdate.bind(this)}_swapBackend(e){this.backend=e}addPlugin(e){e.attachToComponent(this)}connect(){this.hooks.triggerHook("connect",this),this.unsyncedInputsTracker.activate(),this.externalMutationTracker.start()}disconnect(){this.hooks.triggerHook("disconnect",this),this.clearRequestDebounceTimeout(),this.unsyncedInputsTracker.deactivate(),this.externalMutationTracker.stop()}on(e,t){this.hooks.register(e,t)}off(e,t){this.hooks.unregister(e,t)}set(e,t,n=!1,r=!1){const i=this.nextRequestPromise,s=o(e);if(!this.valueStore.has(s))throw new Error(`Invalid model name "${e}".`);const a=this.valueStore.set(s,t);return this.hooks.triggerHook("model:set",e,t,this),this.unsyncedInputsTracker.markModelAsSynced(s),n&&a&&this.debouncedStartRequest(r),i}getData(e){const t=o(e);if(!this.valueStore.has(t))throw new Error(`Invalid model "${e}".`);return this.valueStore.get(t)}action(e,t={},n=!1){const r=this.nextRequestPromise;return this.pendingActions.push({name:e,args:t}),this.debouncedStartRequest(n),r}files(e,t){this.pendingFiles[e]=t}render(){const e=this.nextRequestPromise;return this.tryStartingRequest(),e}getUnsyncedModels(){return this.unsyncedInputsTracker.getUnsyncedModels()}addChild(e,t=[]){if(!e.id)throw new Error("Children components must have an id.");this.children.set(e.id,new D(e,t)),e.parent=this,e.on("model:set",this.onChildComponentModelUpdate)}removeChild(e){if(!e.id)throw new Error("Children components must have an id.");this.children.delete(e.id),e.parent=null,e.off("model:set",this.onChildComponentModelUpdate)}getParent(){return this.parent}getChildren(){const e=new Map;return this.children.forEach(((t,n)=>{e.set(n,t.component)})),e}emit(e,t,n=null){return this.performEmit(e,t,!1,n)}emitUp(e,t,n=null){return this.performEmit(e,t,!0,n)}emitSelf(e,t){return this.doEmit(e,t)}performEmit(e,t,n,r){this.componentFinder(this,n,r).forEach((n=>{n.doEmit(e,t)}))}doEmit(e,t){if(!this.listeners.has(e))return;(this.listeners.get(e)||[]).forEach((e=>{this.action(e,t,1)}))}updateFromNewElementFromParentRender(e){const t=this.elementDriver.getComponentProps(e);if(null===t)return;const n=this.valueStore.storeNewPropsFromParent(t),r=e.dataset.liveFingerprintValue;void 0!==r&&(this.fingerprint=r),n&&this.render()}onChildComponentModelUpdate(e,t,n){if(!n.id)throw new Error("Missing id");const r=this.children.get(n.id);if(!r)throw new Error("Missing child");r.modelBindings.forEach((n=>{(n.innerModelName||"value")===e&&this.set(n.modelName,t,n.shouldRender,n.debounce)}))}isTurboEnabled(){return"undefined"!=typeof Turbo&&!this.element.closest('[data-turbo="false"]')}tryStartingRequest(){this.backendRequest?this.isRequestPending=!0:this.performRequest()}performRequest(){const e=this.nextRequestPromiseResolve;this.resetPromise(),this.unsyncedInputsTracker.resetUnsyncedFields();const t={};for(const[e,n]of Object.entries(this.pendingFiles))n.files&&(t[e]=n.files);this.backendRequest=this.backend.makeRequest(this.valueStore.getOriginalProps(),this.pendingActions,this.valueStore.getDirtyProps(),this.getChildrenFingerprints(),this.valueStore.getUpdatedPropsFromParent(),t),this.hooks.triggerHook("loading.state:started",this.element,this.backendRequest),this.pendingActions=[],this.valueStore.flushDirtyPropsToPending(),this.isRequestPending=!1,this.backendRequest.promise.then((async t=>{this.backendRequest=null;const n=new N(t),r=await n.getBody();for(const e of Object.values(this.pendingFiles))e.value="";const i=n.response.headers;if("application/vnd.live-component+html"!==i.get("Content-Type")&&!i.get("X-Live-Redirect")){const i={displayError:!0};return this.valueStore.pushPendingPropsBackToDirty(),this.hooks.triggerHook("response:error",n,i),i.displayError&&this.renderError(r),e(n),t}return this.processRerender(r,n),e(n),this.isRequestPending&&(this.isRequestPending=!1,this.performRequest()),t}))}processRerender(e,t){const n={shouldRender:!0};if(this.hooks.triggerHook("render:started",e,t,n),!n.shouldRender)return;if(t.response.headers.get("Location"))return void(this.isTurboEnabled()?Turbo.visit(t.response.headers.get("Location")):window.location.href=t.response.headers.get("Location")||"");this.hooks.triggerHook("loading.state:finished",this.element);const r={};let i;Object.keys(this.valueStore.getDirtyProps()).forEach((e=>{r[e]=this.valueStore.get(e)}));try{if(i=function(e){const t=document.createElement("template");if(e=e.trim(),t.innerHTML=e,t.content.childElementCount>1)throw new Error(`Component HTML contains ${t.content.childElementCount} elements, but only 1 root element is allowed.`);const n=t.content.firstElementChild;if(!n)throw new Error("Child not found");if(!(n instanceof HTMLElement))throw new Error(`Created element is not an HTMLElement: ${e.trim()}`);return n}(e),!i.matches("[data-controller~=live]"))throw new Error("A live component template must contain a single root controller element.")}catch(e){throw console.error("There was a problem with the component HTML returned:"),e}const s=this.elementDriver.getComponentProps(i);this.valueStore.reinitializeAllProps(s);const o=this.elementDriver.getEventsToEmit(i),c=this.elementDriver.getBrowserEventsToDispatch(i);this.externalMutationTracker.handlePendingChanges(),this.externalMutationTracker.stop(),function(e,t,n,r,i,s,o,a){const c=new Map;i.forEach((e=>{c.set(e.element,e)})),T(e,t,{getNodeKey:e=>{if(e instanceof HTMLElement)return a.wasElementAdded(e)?"added_element_"+Math.random():o(e)},onBeforeElUpdated:(t,i)=>{if(t===e)return!0;if(t instanceof HTMLElement&&i instanceof HTMLElement){if(void 0!==t.__x){if(!window.Alpine)throw new Error("Unable to access Alpine.js though the global window.Alpine variable. Please make sure Alpine.js is loaded before Symfony UX LiveComponent.");if("function"!=typeof window.Alpine.morph)throw new Error("Unable to access Alpine.js morph function. Please make sure the Alpine.js Morph plugin is installed and loaded, see https://alpinejs.dev/plugins/morph for more information.");window.Alpine.morph(t.__x,i)}if(c.has(t))return c.get(t).updateFromNewElementFromParentRender(i),!1;n.includes(t)&&l(i,r(t));const e=a.getChangedElement(t);if(e&&e.applyToElement(i),"OPTION"!==t.nodeName.toUpperCase()&&t.isEqualNode(i)){const e=h(t);M(e);const n=h(i);if(M(n),e.isEqualNode(n))return!1}}return!t.hasAttribute("data-live-ignore")},onBeforeNodeDiscarded:e=>!(e instanceof HTMLElement)||!a.wasElementAdded(e)&&!e.hasAttribute("data-live-ignore")})}(this.element,i,this.unsyncedInputsTracker.getUnsyncedInputs(),(e=>a(e,this.valueStore)),Array.from(this.getChildren().values()),this.elementDriver.findChildComponentElement,this.elementDriver.getKeyFromElement,this.externalMutationTracker),this.externalMutationTracker.start(),Object.keys(r).forEach((e=>{this.valueStore.set(e,r[e])})),o.forEach((({event:e,data:t,target:n,componentName:r})=>{"up"!==n?"self"!==n?this.emit(e,t,r):this.emitSelf(e,t):this.emitUp(e,t,r)})),c.forEach((({event:e,payload:t})=>{this.element.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0}))})),this.hooks.triggerHook("render:finished",this)}calculateDebounce(e){return!0===e?this.defaultDebounce:!1===e?0:e}clearRequestDebounceTimeout(){this.requestDebounceTimeout&&(clearTimeout(this.requestDebounceTimeout),this.requestDebounceTimeout=null)}debouncedStartRequest(e){this.clearRequestDebounceTimeout(),this.requestDebounceTimeout=window.setTimeout((()=>{this.render()}),this.calculateDebounce(e))}renderError(e){let t=document.getElementById("live-component-error");t?t.innerHTML="":(t=document.createElement("div"),t.id="live-component-error",t.style.padding="50px",t.style.backgroundColor="rgba(0, 0, 0, .5)",t.style.zIndex="100000",t.style.position="fixed",t.style.top="0px",t.style.bottom="0px",t.style.left="0px",t.style.right="0px",t.style.display="flex",t.style.flexDirection="column");const n=document.createElement("iframe");n.style.borderRadius="5px",n.style.flexGrow="1",t.appendChild(n),document.body.prepend(t),document.body.style.overflow="hidden",n.contentWindow&&(n.contentWindow.document.open(),n.contentWindow.document.write(e),n.contentWindow.document.close());const r=e=>{e&&(e.outerHTML=""),document.body.style.overflow="visible"};t.addEventListener("click",(()=>r(t))),t.setAttribute("tabindex","0"),t.addEventListener("keydown",(e=>{"Escape"===e.key&&r(t)})),t.focus()}getChildrenFingerprints(){const e={};return this.children.forEach((t=>{const n=t.component;if(!n.id)throw new Error("missing id");e[n.id]={fingerprint:n.fingerprint,tag:n.element.tagName.toLowerCase()}})),e}resetPromise(){this.nextRequestPromise=new Promise((e=>{this.nextRequestPromiseResolve=e}))}}class ${constructor(e,t,n){this.isResolved=!1,this.promise=e,this.promise.then((e=>(this.isResolved=!0,e))),this.actions=t,this.updatedModels=n}containsOneOfActions(e){return this.actions.filter((t=>e.includes(t))).length>0}areAnyModelsUpdated(e){return this.updatedModels.filter((t=>e.includes(t))).length>0}}class B{constructor(e,t=null){this.url=e,this.csrfToken=t}buildRequest(e,t,n,r,i,s){const o=this.url.split("?");let[a]=o;const[,l]=o,c=new URLSearchParams(l||""),u={headers:{Accept:"application/vnd.live-component+html","X-Requested-With":"XMLHttpRequest"}},d=Object.entries(s).reduce(((e,t)=>e+t.length),0),h=Object.keys(r).length>0;if(0===t.length&&0===d&&this.willDataFitInUrl(JSON.stringify(e),JSON.stringify(n),c,JSON.stringify(r),JSON.stringify(i)))c.set("props",JSON.stringify(e)),c.set("updated",JSON.stringify(n)),Object.keys(i).length>0&&c.set("propsFromParent",JSON.stringify(i)),h&&c.set("children",JSON.stringify(r)),u.method="GET";else{u.method="POST";const o={props:e,updated:n};Object.keys(i).length>0&&(o.propsFromParent=i),h&&(o.children=r),this.csrfToken&&(t.length||d)&&(u.headers["X-CSRF-TOKEN"]=this.csrfToken),t.length>0&&(1===t.length?(o.args=t[0].args,a+=`/${encodeURIComponent(t[0].name)}`):(a+="/_batch",o.actions=t));const l=new FormData;l.append("data",JSON.stringify(o));for(const[e,t]of Object.entries(s)){const n=t.length;for(let r=0;r<n;++r)l.append(e,t[r])}u.body=l}const p=c.toString();return{url:`${a}${p.length>0?`?${p}`:""}`,fetchOptions:u}}willDataFitInUrl(e,t,n,r,i){return(new URLSearchParams(e+t+r+i).toString()+n.toString()).length<1500}}class V{constructor(e,t=null){this.requestBuilder=new B(e,t)}makeRequest(e,t,n,r,i,s){const{url:o,fetchOptions:a}=this.requestBuilder.buildRequest(e,t,n,r,i,s);return new $(fetch(o,a),t.map((e=>e.name)),Object.keys(n))}}class q{getModelName(e){const t=u(e,!1);return t?t.action:null}getComponentProps(e){var t;const n=null!==(t=e.dataset.livePropsValue)&&void 0!==t?t:"{}";return JSON.parse(n)}findChildComponentElement(e,t){return t.querySelector(`[data-live-id=${e}]`)}getKeyFromElement(e){return e.dataset.liveId||null}getEventsToEmit(e){var t;const n=null!==(t=e.dataset.liveEmit)&&void 0!==t?t:"[]";return JSON.parse(n)}getBrowserEventsToDispatch(e){var t;const n=null!==(t=e.dataset.liveBrowserDispatch)&&void 0!==t?t:"[]";return JSON.parse(n)}}class U{attachToComponent(e){e.on("loading.state:started",((e,t)=>{this.startLoading(e,t)})),e.on("loading.state:finished",(e=>{this.finishLoading(e)})),this.finishLoading(e.element)}startLoading(e,t){this.handleLoadingToggle(!0,e,t)}finishLoading(e){this.handleLoadingToggle(!1,e,null)}handleLoadingToggle(e,t,n){e?this.addAttributes(t,["busy"]):this.removeAttributes(t,["busy"]),this.getLoadingDirectives(t).forEach((({element:t,directives:r})=>{e?this.addAttributes(t,["data-live-is-loading"]):this.removeAttributes(t,["data-live-is-loading"]),r.forEach((r=>{this.handleLoadingDirective(t,e,r,n)}))}))}handleLoadingDirective(e,t,n,r){const i=H(n.action,t),s=[],o=[];let a=0;const l=new Map;if(l.set("delay",(e=>{t&&(a=e.value?parseInt(e.value):200)})),l.set("action",(e=>{if(!e.value)throw new Error(`The "action" in data-loading must have an action name - e.g. action(foo). It's missing for "${n.getString()}"`);s.push(e.value)})),l.set("model",(e=>{if(!e.value)throw new Error(`The "model" in data-loading must have an action name - e.g. model(foo). It's missing for "${n.getString()}"`);o.push(e.value)})),n.modifiers.forEach((e=>{var t;if(!l.has(e.name))throw new Error(`Unknown modifier "${e.name}" used in data-loading="${n.getString()}". Available modifiers are: ${Array.from(l.keys()).join(", ")}.`);(null!==(t=l.get(e.name))&&void 0!==t?t:()=>{})(e)})),t&&s.length>0&&r&&!r.containsOneOfActions(s))return;if(t&&o.length>0&&r&&!r.areAnyModelsUpdated(o))return;let c;switch(i){case"show":c=()=>{this.showElement(e)};break;case"hide":c=()=>this.hideElement(e);break;case"addClass":c=()=>this.addClass(e,n.args);break;case"removeClass":c=()=>this.removeClass(e,n.args);break;case"addAttribute":c=()=>this.addAttributes(e,n.args);break;case"removeAttribute":c=()=>this.removeAttributes(e,n.args);break;default:throw new Error(`Unknown data-loading action "${i}"`)}a?window.setTimeout((()=>{r&&!r.isResolved&&c()}),a):c()}getLoadingDirectives(e){const t=[];return e.querySelectorAll("[data-loading]").forEach((e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))throw new Error("Invalid Element Type");const n=i(e.dataset.loading||"show");t.push({element:e,directives:n})})),t}showElement(e){e.style.display="revert"}hideElement(e){e.style.display="none"}addClass(e,t){e.classList.add(...s(t))}removeClass(e,t){e.classList.remove(...s(t)),0===e.classList.length&&this.removeAttributes(e,["class"])}addAttributes(e,t){t.forEach((t=>{e.setAttribute(t,"")}))}removeAttributes(e,t){t.forEach((t=>{e.removeAttribute(t)}))}}const H=function(e,t){switch(e){case"show":return t?"show":"hide";case"hide":return t?"hide":"show";case"addClass":return t?"addClass":"removeClass";case"removeClass":return t?"removeClass":"addClass";case"addAttribute":return t?"addAttribute":"removeAttribute";case"removeAttribute":return t?"removeAttribute":"addAttribute"}throw new Error(`Unknown data-loading action "${e}"`)};class K{attachToComponent(e){e.on("model:set",(t=>{this.handleModelSet(t,e.valueStore)}))}handleModelSet(e,t){if(t.has("validatedFields")){const n=[...t.get("validatedFields")];n.includes(e)||n.push(e),t.set("validatedFields",n)}}}class z{constructor(){this.isConnected=!1}attachToComponent(e){e.on("render:started",((e,t,n)=>{this.isConnected||(n.shouldRender=!1)})),e.on("connect",(()=>{this.isConnected=!0})),e.on("disconnect",(()=>{this.isConnected=!1}))}}class G{constructor(e){this.isPollingActive=!0,this.pollingIntervals=[],this.component=e}addPoll(e,t){this.polls.push({actionName:e,duration:t}),this.isPollingActive&&this.initiatePoll(e,t)}startAllPolling(){this.isPollingActive||(this.isPollingActive=!0,this.polls.forEach((({actionName:e,duration:t})=>{this.initiatePoll(e,t)})))}stopAllPolling(){this.isPollingActive=!1,this.pollingIntervals.forEach((e=>{clearInterval(e)}))}clearPolling(){this.stopAllPolling(),this.polls=[],this.startAllPolling()}initiatePoll(e,t){let n;n="$render"===e?()=>{this.component.render()}:()=>{this.component.action(e,{},0)};const r=setInterval((()=>{n()}),t);this.pollingIntervals.push(r)}}class W{attachToComponent(e){this.element=e.element,this.pollingDirector=new G(e),this.initializePolling(),e.on("connect",(()=>{this.pollingDirector.startAllPolling()})),e.on("disconnect",(()=>{this.pollingDirector.stopAllPolling()})),e.on("render:finished",(()=>{this.initializePolling()}))}addPoll(e,t){this.pollingDirector.addPoll(e,t)}clearPolling(){this.pollingDirector.clearPolling()}initializePolling(){if(this.clearPolling(),void 0===this.element.dataset.poll)return;const e=this.element.dataset.poll;i(e||"$render").forEach((t=>{let n=2e3;t.modifiers.forEach((t=>{if("delay"===t.name)t.value&&(n=parseInt(t.value));else console.warn(`Unknown modifier "${t.name}" in data-poll "${e}".`)})),this.addPoll(t.action,n)}))}}class J{attachToComponent(e){this.synchronizeValueOfModelFields(e),e.on("render:finished",(()=>{this.synchronizeValueOfModelFields(e)}))}synchronizeValueOfModelFields(e){e.element.querySelectorAll("[data-model]").forEach((t=>{if(!(t instanceof HTMLElement))throw new Error("Invalid element using data-model.");if(t instanceof HTMLFormElement)return;if(!d(t,e))return;const n=u(t);if(!n)return;const r=n.action;e.getUnsyncedModels().includes(r)||(e.valueStore.has(r)&&l(t,e.valueStore.get(r)),t instanceof HTMLSelectElement&&!t.multiple&&e.valueStore.set(r,a(t,e.valueStore)))}))}}function Q(e){let t=!0,n=null,r=!1;e.modifiers.forEach((i=>{switch(i.name){case"on":if(!i.value)throw new Error(`The "on" modifier in ${e.getString()} requires a value - e.g. on(change).`);if(!["input","change"].includes(i.value))throw new Error(`The "on" modifier in ${e.getString()} only accepts the arguments "input" or "change".`);n=i.value;break;case"norender":t=!1;break;case"debounce":r=!i.value||parseInt(i.value);break;default:throw new Error(`Unknown modifier "${i.name}" in data-model="${e.getString()}".`)}}));const[i,s]=e.action.split(":");return{modelName:i,innerModelName:s||null,shouldRender:t,debounce:r,targetEventName:n}}const X=e=>Y.componentRegistry.getComponent(e);class Y extends r.Qr{constructor(){super(...arguments),this.pendingActionTriggerModelElement=null,this.elementEventListeners=[{event:"input",callback:e=>this.handleInputEvent(e)},{event:"change",callback:e=>this.handleChangeEvent(e)},{event:"live:connect",callback:e=>this.handleConnectedControllerEvent(e)}],this.pendingFiles={}}initialize(){this.handleDisconnectedChildControllerEvent=this.handleDisconnectedChildControllerEvent.bind(this);const e=this.element.dataset.liveId||null;var t;this.component=new R(this.element,this.nameValue,this.propsValue,this.listenersValue,((e,t,n)=>Y.componentRegistry.findComponents(e,t,n)),this.fingerprintValue,e,new V(this.urlValue,this.csrfValue),new q),this.proxiedComponent=(t=this.component,new Proxy(t,{get(e,t){if(t in e||"string"!=typeof t){if("function"==typeof e[t]){const n=e[t];return(...t)=>n.apply(e,t)}return Reflect.get(e,t)}return e.valueStore.has(t)?e.getData(t):n=>e.action.apply(e,[t,n])},set:(e,t,n)=>t in e?(e[t]=n,!0):(e.set(t,n),!0)})),this.element.__component=this.proxiedComponent,this.hasDebounceValue&&(this.component.defaultDebounce=this.debounceValue);[new U,new K,new z,new W,new J].forEach((e=>{this.component.addPlugin(e)}))}connect(){Y.componentRegistry.registerComponent(this.element,this.component),this.component.connect(),this.elementEventListeners.forEach((({event:e,callback:t})=>{this.component.element.addEventListener(e,t)})),this.dispatchEvent("connect")}disconnect(){Y.componentRegistry.unregisterComponent(this.component),this.component.disconnect(),this.elementEventListeners.forEach((({event:e,callback:t})=>{this.component.element.removeEventListener(e,t)})),this.dispatchEvent("disconnect")}update(e){if("input"===e.type||"change"===e.type)throw new Error(`Since LiveComponents 2.3, you no longer need data-action="live#update" on form elements. Found on element: ${p(e.currentTarget)}`);this.updateModelFromElementEvent(e.currentTarget,null)}action(e){const t=e.currentTarget.dataset.actionName,n=i(t);let r=!1;n.forEach((n=>{let i={};const s=new Map;s.set("prevent",(()=>{e.preventDefault()})),s.set("stop",(()=>{e.stopPropagation()})),s.set("self",(()=>{e.target,e.currentTarget})),s.set("debounce",(e=>{r=!e.value||parseInt(e.value)})),s.set("files",(e=>{e.value?this.pendingFiles[e.value]&&(i[e.value]=this.pendingFiles[e.value]):i=this.pendingFiles})),n.modifiers.forEach((e=>{var n;if(s.has(e.name)){(null!==(n=s.get(e.name))&&void 0!==n?n:()=>{})(e)}else console.warn(`Unknown modifier ${e.name} in action "${t}". Available modifiers are: ${Array.from(s.keys()).join(", ")}.`)}));for(const[e,t]of Object.entries(i))t.files&&this.component.files(e,t),delete this.pendingFiles[e];this.component.action(n.action,n.named,r),u(e.currentTarget,!1)&&(this.pendingActionTriggerModelElement=e.currentTarget)}))}$render(){return this.component.render()}emit(e){this.getEmitDirectives(e).forEach((({name:e,data:t,nameMatch:n})=>{this.component.emit(e,t,n)}))}emitUp(e){this.getEmitDirectives(e).forEach((({name:e,data:t,nameMatch:n})=>{this.component.emitUp(e,t,n)}))}emitSelf(e){this.getEmitDirectives(e).forEach((({name:e,data:t})=>{this.component.emitSelf(e,t)}))}getEmitDirectives(e){const t=e.currentTarget;if(!t.dataset.event)throw new Error(`No data-event attribute found on element: ${p(t)}`);const n=t.dataset.event,r=i(n),s=[];return r.forEach((e=>{let t=null;e.modifiers.forEach((e=>{if("name"!==e.name)throw new Error(`Unknown modifier ${e.name} in event "${n}".`);t=e.value})),s.push({name:e.action,data:e.named,nameMatch:t})})),s}$updateModel(e,t,n=!0,r=!0){return this.component.set(e,t,n,r)}handleInputEvent(e){const t=e.target;t&&this.updateModelFromElementEvent(t,"input")}handleChangeEvent(e){const t=e.target;t&&this.updateModelFromElementEvent(t,"change")}updateModelFromElementEvent(e,t){var n;if(!d(e,this.component))return;if(!(e instanceof HTMLElement))throw new Error("Could not update model for non HTMLElement");if(e instanceof HTMLInputElement&&"file"===e.type){const t=e.name;(null===(n=e.files)||void 0===n?void 0:n.length)?this.pendingFiles[t]=e:this.pendingFiles[t]&&delete this.pendingFiles[t]}const r=u(e,!1);if(!r)return;const i=Q(r);if(i.targetEventName||(i.targetEventName="input"),this.pendingActionTriggerModelElement===e&&(i.shouldRender=!1),"change"===t&&"input"===i.targetEventName&&(i.targetEventName="change"),t&&i.targetEventName!==t)return;!1===i.debounce&&("input"===i.targetEventName?i.debounce=!0:i.debounce=0);const s=a(e,this.component.valueStore);this.component.set(i.modelName,s,i.shouldRender,i.debounce)}handleConnectedControllerEvent(e){if(e.target===this.element)return;const t=e.detail.controller;if(t.component.getParent())return;const n=c(t.element).map(Q);this.component.addChild(t.component,n),t.element.addEventListener("live:disconnect",this.handleDisconnectedChildControllerEvent)}handleDisconnectedChildControllerEvent(e){const t=e.detail.controller;t.element.removeEventListener("live:disconnect",this.handleDisconnectedChildControllerEvent),t.component.getParent()===this.component&&this.component.removeChild(t.component)}dispatchEvent(e,t={},n=!0,r=!1){t.controller=this,t.component=this.proxiedComponent,this.dispatch(e,{detail:t,prefix:"live",cancelable:r,bubbles:n})}}Y.values={name:String,url:String,props:Object,csrf:String,listeners:{type:Array,default:[]},debounce:{type:Number,default:150},id:String,fingerprint:{type:String,default:""}},Y.componentRegistry=new class{constructor(){this.componentMapByElement=new WeakMap,this.componentMapByComponent=new Map}registerComponent(e,t){this.componentMapByElement.set(e,t),this.componentMapByComponent.set(t,t.name)}unregisterComponent(e){this.componentMapByElement.delete(e.element),this.componentMapByComponent.delete(e)}getComponent(e){return new Promise(((t,n)=>{let r=0;const i=setInterval((()=>{const s=this.componentMapByElement.get(e);s&&(clearInterval(i),t(s)),r++,r>10&&(clearInterval(i),n(new Error(`Component not found for element ${p(e)}`)))}),5)}))}findComponents(e,t,n){const r=[];return this.componentMapByComponent.forEach(((i,s)=>{(!t||e!==s&&s.element.contains(e.element))&&(n&&i!==n||r.push(s))})),r}}},9662:(e,t,n)=>{var r=n(614),i=n(6330),s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not a function")}},9483:(e,t,n)=>{var r=n(4411),i=n(6330),s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not a constructor")}},6077:(e,t,n)=>{var r=n(614),i=String,s=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw s("Can't set "+i(e)+" as a prototype")}},1223:(e,t,n)=>{var r=n(5112),i=n(30),s=n(3070).f,o=r("unscopables"),a=Array.prototype;null==a[o]&&s(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},9670:(e,t,n)=>{var r=n(111),i=String,s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not an object")}},1318:(e,t,n)=>{var r=n(5656),i=n(1400),s=n(6244),o=function(e){return function(t,n,o){var a,l=r(t),c=s(l),u=i(o,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2092:(e,t,n)=>{var r=n(9974),i=n(1702),s=n(8361),o=n(7908),a=n(6244),l=n(5417),c=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(m,g,f,v){for(var y,b,w=o(m),O=s(w),E=r(g,f),A=a(O),C=0,S=v||l,k=t?S(m,A):n||h?S(m,0):void 0;A>C;C++)if((p||C in O)&&(b=E(y=O[C],C,w),e))if(t)k[C]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return C;case 2:c(k,y)}else switch(e){case 4:return!1;case 7:c(k,y)}return d?-1:i||u?u:k}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},1589:(e,t,n)=>{var r=n(1400),i=n(6244),s=n(6135),o=Array,a=Math.max;e.exports=function(e,t,n){for(var l=i(e),c=r(t,l),u=r(void 0===n?l:n,l),d=o(a(u-c,0)),h=0;c<u;c++,h++)s(d,h,e[c]);return d.length=h,d}},206:(e,t,n)=>{var r=n(1702);e.exports=r([].slice)},7475:(e,t,n)=>{var r=n(3157),i=n(4411),s=n(111),o=n(5112)("species"),a=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===a||r(t.prototype))||s(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?a:t}},5417:(e,t,n)=>{var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},4326:(e,t,n)=>{var r=n(1702),i=r({}.toString),s=r("".slice);e.exports=function(e){return s(i(e),8,-1)}},648:(e,t,n)=>{var r=n(1694),i=n(614),s=n(4326),o=n(5112)("toStringTag"),a=Object,l="Arguments"==s(function(){return arguments}());e.exports=r?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?n:l?s(t):"Object"==(r=s(t))&&i(t.callee)?"Arguments":r}},9920:(e,t,n)=>{var r=n(2597),i=n(3887),s=n(1236),o=n(3070);e.exports=function(e,t,n){for(var a=i(t),l=o.f,c=s.f,u=0;u<a.length;u++){var d=a[u];r(e,d)||n&&r(n,d)||l(e,d,c(t,d))}}},8544:(e,t,n)=>{var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:e=>{e.exports=function(e,t){return{value:e,done:t}}},8880:(e,t,n)=>{var r=n(9781),i=n(3070),s=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,n)=>{"use strict";var r=n(4948),i=n(3070),s=n(9114);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},7045:(e,t,n)=>{var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:(e,t,n)=>{var r=n(614),i=n(3070),s=n(6339),o=n(3072);e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(r(n)&&s(n,c,a),a.global)l?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:(e,t,n)=>{var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9781:(e,t,n)=>{var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:(e,t,n)=>{var r=n(7854),i=n(111),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,n)=>{var r=n(317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8113:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:(e,t,n)=>{var r,i,s=n(7854),o=n(8113),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,n)=>{var r=n(7854),i=n(1236).f,s=n(8880),o=n(8052),a=n(3072),l=n(9920),c=n(4705);e.exports=function(e,t){var n,u,d,h,p,m=e.target,g=e.global,f=e.stat;if(n=g?r:f?r[m]||a(m,{}):(r[m]||{}).prototype)for(u in t){if(h=t[u],d=e.dontCallGetSet?(p=i(n,u))&&p.value:n[u],!c(g?u:m+(f?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),o(n,u,h,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},2104:(e,t,n)=>{var r=n(4374),i=Function.prototype,s=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},9974:(e,t,n)=>{var r=n(1470),i=n(9662),s=n(4374),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},4374:(e,t,n)=>{var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7065:(e,t,n)=>{"use strict";var r=n(1702),i=n(9662),s=n(111),o=n(2597),a=n(206),l=n(4374),c=Function,u=r([].concat),d=r([].join),h={},p=function(e,t,n){if(!o(h,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";h[t]=c("C,a","return new C("+d(r,",")+")")}return h[t](e,n)};e.exports=l?c.bind:function(e){var t=i(this),n=t.prototype,r=a(arguments,1),o=function(){var n=u(r,a(arguments));return this instanceof o?p(t,n.length,n):t.apply(e,n)};return s(n)&&(o.prototype=n),o}},6916:(e,t,n)=>{var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:(e,t,n)=>{var r=n(9781),i=n(2597),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},5668:(e,t,n)=>{var r=n(1702),i=n(9662);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},1470:(e,t,n)=>{var r=n(4326),i=n(1702);e.exports=function(e){if("Function"===r(e))return i(e)}},1702:(e,t,n)=>{var r=n(4374),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);e.exports=r?o:function(e){return function(){return s.apply(e,arguments)}}},5005:(e,t,n)=>{var r=n(7854),i=n(614),s=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(r[e]):r[e]&&r[e][t]}},8044:(e,t,n)=>{var r=n(1702),i=n(3157),s=n(614),o=n(4326),a=n(1340),l=r([].push);e.exports=function(e){if(s(e))return e;if(i(e)){for(var t=e.length,n=[],r=0;r<t;r++){var c=e[r];"string"==typeof c?l(n,c):"number"!=typeof c&&"Number"!=o(c)&&"String"!=o(c)||l(n,a(c))}var u=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(i(this))return t;for(var r=0;r<u;r++)if(n[r]===e)return t}}}},8173:(e,t,n)=>{var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7854:(e,t,n)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:(e,t,n)=>{var r=n(1702),i=n(7908),s=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},3501:e=>{e.exports={}},490:(e,t,n)=>{var r=n(5005);e.exports=r("document","documentElement")},4664:(e,t,n)=>{var r=n(9781),i=n(7293),s=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,n)=>{var r=n(1702),i=n(7293),s=n(4326),o=Object,a=r("".split);e.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):o(e)}:o},2788:(e,t,n)=>{var r=n(1702),i=n(614),s=n(5465),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},9909:(e,t,n)=>{var r,i,s,o=n(4811),a=n(7854),l=n(111),c=n(8880),u=n(2597),d=n(5465),h=n(6200),p=n(3501),m="Object already initialized",g=a.TypeError,f=a.WeakMap;if(o||d.state){var v=d.state||(d.state=new f);v.get=v.get,v.has=v.has,v.set=v.set,r=function(e,t){if(v.has(e))throw g(m);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},s=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,r=function(e,t){if(u(e,y))throw g(m);return t.facade=e,c(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},s=function(e){return u(e,y)}}e.exports={set:r,get:i,has:s,enforce:function(e){return s(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}}}},3157:(e,t,n)=>{var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:(e,t,n)=>{var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:(e,t,n)=>{var r=n(1702),i=n(7293),s=n(614),o=n(648),a=n(5005),l=n(2788),c=function(){},u=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=r(h.exec),m=!h.exec(c),g=function(e){if(!s(e))return!1;try{return d(c,u,e),!0}catch(e){return!1}},f=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!p(h,l(e))}catch(e){return!0}};f.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?f:g},4705:(e,t,n)=>{var r=n(7293),i=n(614),s=/#|\.prototype\./,o=function(e,t){var n=l[a(e)];return n==u||n!=c&&(i(t)?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},8554:e=>{e.exports=function(e){return null==e}},111:(e,t,n)=>{var r=n(614),i=n(4154),s=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===s}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:e=>{e.exports=!1},2190:(e,t,n)=>{var r=n(5005),i=n(614),s=n(7976),o=n(3307),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&s(t.prototype,a(e))}},3061:(e,t,n)=>{"use strict";var r=n(3383).IteratorPrototype,i=n(30),s=n(9114),o=n(8003),a=n(7497),l=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=i(r,{next:s(+!c,n)}),o(e,u,!1,!0),a[u]=l,e}},1656:(e,t,n)=>{"use strict";var r=n(2109),i=n(6916),s=n(1913),o=n(6530),a=n(614),l=n(3061),c=n(9518),u=n(7674),d=n(8003),h=n(8880),p=n(8052),m=n(5112),g=n(7497),f=n(3383),v=o.PROPER,y=o.CONFIGURABLE,b=f.IteratorPrototype,w=f.BUGGY_SAFARI_ITERATORS,O=m("iterator"),E="keys",A="values",C="entries",S=function(){return this};e.exports=function(e,t,n,o,m,f,k){l(n,t,o);var x,T,M,I=function(e){if(e===m&&_)return _;if(!w&&e in N)return N[e];switch(e){case E:case A:case C:return function(){return new n(this,e)}}return function(){return new n(this)}},L=t+" Iterator",F=!1,N=e.prototype,P=N[O]||N["@@iterator"]||m&&N[m],_=!w&&P||I(m),j="Array"==t&&N.entries||P;if(j&&(x=c(j.call(new e)))!==Object.prototype&&x.next&&(s||c(x)===b||(u?u(x,b):a(x[O])||p(x,O,S)),d(x,L,!0,!0),s&&(g[L]=S)),v&&m==A&&P&&P.name!==A&&(!s&&y?h(N,"name",A):(F=!0,_=function(){return i(P,this)})),m)if(T={values:I(A),keys:f?_:I(E),entries:I(C)},k)for(M in T)(w||F||!(M in N))&&p(N,M,T[M]);else r({target:t,proto:!0,forced:w||F},T);return s&&!k||N[O]===_||p(N,O,_,{name:m}),g[t]=_,T}},3383:(e,t,n)=>{"use strict";var r,i,s,o=n(7293),a=n(614),l=n(111),c=n(30),u=n(9518),d=n(8052),h=n(5112),p=n(1913),m=h("iterator"),g=!1;[].keys&&("next"in(s=[].keys())?(i=u(u(s)))!==Object.prototype&&(r=i):g=!0),!l(r)||o((function(){var e={};return r[m].call(e)!==e}))?r={}:p&&(r=c(r)),a(r[m])||d(r,m,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},7497:e=>{e.exports={}},6244:(e,t,n)=>{var r=n(7466);e.exports=function(e){return r(e.length)}},6339:(e,t,n)=>{var r=n(1702),i=n(7293),s=n(614),o=n(2597),a=n(9781),l=n(6530).CONFIGURABLE,c=n(2788),u=n(9909),d=u.enforce,h=u.get,p=String,m=Object.defineProperty,g=r("".slice),f=r("".replace),v=r([].join),y=a&&!i((function(){return 8!==m((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===g(p(t),0,7)&&(t="["+f(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||l&&e.name!==t)&&(a?m(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&o(n,"arity")&&e.length!==n.arity&&m(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&m(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return o(r,"source")||(r.source=v(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return s(this)&&h(this).source||c(this)}),"toString")},4758:e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},30:(e,t,n)=>{var r,i=n(9670),s=n(6048),o=n(748),a=n(3501),l=n(490),c=n(317),u=n(6200),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"</"+"script>"},m=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;g="undefined"!=typeof document?document.domain&&r?m(r):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):m(r);for(var n=o.length;n--;)delete g.prototype[o[n]];return g()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[d]=e):n=g(),void 0===t?n:s.f(n,t)}},6048:(e,t,n)=>{var r=n(9781),i=n(3353),s=n(3070),o=n(9670),a=n(5656),l=n(1956);t.f=r&&!i?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),i=l(t),c=i.length,u=0;c>u;)s.f(e,n=i[u++],r[n]);return e}},3070:(e,t,n)=>{var r=n(9781),i=n(4664),s=n(3353),o=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=r?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n.writable){var r=u(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:h in n?n.configurable:r.configurable,enumerable:d in n?n.enumerable:r.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(o(e),t=a(t),o(n),i)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:(e,t,n)=>{var r=n(9781),i=n(6916),s=n(5296),o=n(9114),a=n(5656),l=n(4948),c=n(2597),u=n(4664),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=l(t),u)try{return d(e,t)}catch(e){}if(c(e,t))return o(!i(s.f,e,t),e[t])}},1156:(e,t,n)=>{var r=n(4326),i=n(5656),s=n(8006).f,o=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==r(e)?function(e){try{return s(e)}catch(e){return o(a)}}(e):s(i(e))}},8006:(e,t,n)=>{var r=n(6324),i=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,n)=>{var r=n(2597),i=n(614),s=n(7908),o=n(6200),a=n(8544),l=o("IE_PROTO"),c=Object,u=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=s(e);if(r(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},7976:(e,t,n)=>{var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:(e,t,n)=>{var r=n(1702),i=n(2597),s=n(5656),o=n(1318).indexOf,a=n(3501),l=r([].push);e.exports=function(e,t){var n,r=s(e),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);for(;t.length>c;)i(r,n=t[c++])&&(~o(u,n)||l(u,n));return u}},1956:(e,t,n)=>{var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:(e,t,n)=>{var r=n(5668),i=n(9670),s=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),s(r),t?e(n,r):n.__proto__=r,n}}():void 0)},288:(e,t,n)=>{"use strict";var r=n(1694),i=n(648);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},2140:(e,t,n)=>{var r=n(6916),i=n(614),s=n(111),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!s(a=r(n,e)))return a;if(i(n=e.valueOf)&&!s(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!s(a=r(n,e)))return a;throw o("Can't convert object to primitive value")}},3887:(e,t,n)=>{var r=n(5005),i=n(1702),s=n(8006),o=n(5181),a=n(9670),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?l(t,n(e)):t}},857:(e,t,n)=>{var r=n(7854);e.exports=r},4488:(e,t,n)=>{var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},8003:(e,t,n)=>{var r=n(3070).f,i=n(2597),s=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,s)&&r(e,s,{configurable:!0,value:t})}},6200:(e,t,n)=>{var r=n(2309),i=n(9711),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},5465:(e,t,n)=>{var r=n(7854),i=n(3072),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},2309:(e,t,n)=>{var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.1",mode:r?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},8710:(e,t,n)=>{var r=n(1702),i=n(9303),s=n(1340),o=n(4488),a=r("".charAt),l=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,d=s(o(t)),h=i(n),p=d.length;return h<0||h>=p?e?"":void 0:(r=l(d,h))<55296||r>56319||h+1===p||(u=l(d,h+1))<56320||u>57343?e?a(d,h):r:e?c(d,h,h+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},6293:(e,t,n)=>{var r=n(7392),i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6532:(e,t,n)=>{var r=n(6916),i=n(5005),s=n(5112),o=n(8052);e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=s("toPrimitive");t&&!t[a]&&o(t,a,(function(e){return r(n,this)}),{arity:1})}},2015:(e,t,n)=>{var r=n(6293);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},1400:(e,t,n)=>{var r=n(9303),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},5656:(e,t,n)=>{var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:(e,t,n)=>{var r=n(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},7466:(e,t,n)=>{var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:(e,t,n)=>{var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},7593:(e,t,n)=>{var r=n(6916),i=n(111),s=n(2190),o=n(8173),a=n(2140),l=n(5112),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var n,l=o(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!i(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:(e,t,n)=>{var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:(e,t,n)=>{var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:(e,t,n)=>{var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9711:(e,t,n)=>{var r=n(1702),i=0,s=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+s,36)}},3307:(e,t,n)=>{var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,n)=>{var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:(e,t,n)=>{var r=n(7854),i=n(614),s=r.WeakMap;e.exports=i(s)&&/native code/.test(String(s))},6800:(e,t,n)=>{var r=n(857),i=n(2597),s=n(6061),o=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:s.f(e)})}},6061:(e,t,n)=>{var r=n(5112);t.f=r},5112:(e,t,n)=>{var r=n(7854),i=n(2309),s=n(2597),o=n(9711),a=n(6293),l=n(3307),c=r.Symbol,u=i("wks"),d=l?c.for||c:c&&c.withoutSetter||o;e.exports=function(e){return s(u,e)||(u[e]=a&&s(c,e)?c[e]:d("Symbol."+e)),u[e]}},6992:(e,t,n)=>{"use strict";var r=n(5656),i=n(1223),s=n(7497),o=n(9909),a=n(3070).f,l=n(1656),c=n(6178),u=n(1913),d=n(9781),h="Array Iterator",p=o.set,m=o.getterFor(h);e.exports=l(Array,"Array",(function(e,t){p(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=m(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,c(void 0,!0)):c("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values");var g=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!u&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},4812:(e,t,n)=>{var r=n(2109),i=n(7065);r({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},8862:(e,t,n)=>{var r=n(2109),i=n(5005),s=n(2104),o=n(6916),a=n(1702),l=n(7293),c=n(614),u=n(2190),d=n(206),h=n(8044),p=n(6293),m=String,g=i("JSON","stringify"),f=a(/./.exec),v=a("".charAt),y=a("".charCodeAt),b=a("".replace),w=a(1..toString),O=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,A=/^[\uDC00-\uDFFF]$/,C=!p||l((function(){var e=i("Symbol")();return"[null]"!=g([e])||"{}"!=g({a:e})||"{}"!=g(Object(e))})),S=l((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),k=function(e,t){var n=d(arguments),r=h(t);if(c(r)||void 0!==e&&!u(e))return n[1]=function(e,t){if(c(r)&&(t=o(r,this,m(e),t)),!u(t))return t},s(g,null,n)},x=function(e,t,n){var r=v(n,t-1),i=v(n,t+1);return f(E,e)&&!f(A,i)||f(A,e)&&!f(E,r)?"\\u"+w(y(e,0),16):e};g&&r({target:"JSON",stat:!0,arity:3,forced:C||S},{stringify:function(e,t,n){var r=d(arguments),i=s(C?k:g,null,r);return S&&"string"==typeof i?b(i,O,x):i}})},8011:(e,t,n)=>{n(2109)({target:"Object",stat:!0,sham:!n(9781)},{create:n(30)})},9070:(e,t,n)=>{var r=n(2109),i=n(9781),s=n(3070).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==s,sham:!i},{defineProperty:s})},9660:(e,t,n)=>{var r=n(2109),i=n(6293),s=n(7293),o=n(5181),a=n(7908);r({target:"Object",stat:!0,forced:!i||s((function(){o.f(1)}))},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(a(e)):[]}})},489:(e,t,n)=>{var r=n(2109),i=n(7293),s=n(7908),o=n(9518),a=n(8544);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!a},{getPrototypeOf:function(e){return o(s(e))}})},8304:(e,t,n)=>{n(2109)({target:"Object",stat:!0},{setPrototypeOf:n(7674)})},1539:(e,t,n)=>{var r=n(1694),i=n(8052),s=n(288);r||i(Object.prototype,"toString",s,{unsafe:!0})},2419:(e,t,n)=>{var r=n(2109),i=n(5005),s=n(2104),o=n(7065),a=n(9483),l=n(9670),c=n(111),u=n(30),d=n(7293),h=i("Reflect","construct"),p=Object.prototype,m=[].push,g=d((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),f=!d((function(){h((function(){}))})),v=g||f;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(e,t){a(e),l(t);var n=arguments.length<3?e:a(arguments[2]);if(f&&!g)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return s(m,r,t),new(s(o,e,r))}var i=n.prototype,d=u(c(i)?i:p),v=s(e,d,t);return c(v)?v:d}})},8783:(e,t,n)=>{"use strict";var r=n(8710).charAt,i=n(1340),s=n(9909),o=n(1656),a=n(6178),l="String Iterator",c=s.set,u=s.getterFor(l);o(String,"String",(function(e){c(this,{type:l,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?a(void 0,!0):(e=r(n,i),t.index+=e.length,a(e,!1))}))},4032:(e,t,n)=>{"use strict";var r=n(2109),i=n(7854),s=n(6916),o=n(1702),a=n(1913),l=n(9781),c=n(6293),u=n(7293),d=n(2597),h=n(7976),p=n(9670),m=n(5656),g=n(4948),f=n(1340),v=n(9114),y=n(30),b=n(1956),w=n(8006),O=n(1156),E=n(5181),A=n(1236),C=n(3070),S=n(6048),k=n(5296),x=n(8052),T=n(7045),M=n(2309),I=n(6200),L=n(3501),F=n(9711),N=n(5112),P=n(6061),_=n(6800),j=n(6532),D=n(8003),R=n(9909),$=n(2092).forEach,B=I("hidden"),V="Symbol",q=R.set,U=R.getterFor(V),H=Object.prototype,K=i.Symbol,z=K&&K.prototype,G=i.TypeError,W=i.QObject,J=A.f,Q=C.f,X=O.f,Y=k.f,Z=o([].push),ee=M("symbols"),te=M("op-symbols"),ne=M("wks"),re=!W||!W.prototype||!W.prototype.findChild,ie=l&&u((function(){return 7!=y(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=J(H,t);r&&delete H[t],Q(e,t,n),r&&e!==H&&Q(H,t,r)}:Q,se=function(e,t){var n=ee[e]=y(z);return q(n,{type:V,tag:e,description:t}),l||(n.description=t),n},oe=function(e,t,n){e===H&&oe(te,t,n),p(e);var r=g(t);return p(n),d(ee,r)?(n.enumerable?(d(e,B)&&e[B][r]&&(e[B][r]=!1),n=y(n,{enumerable:v(0,!1)})):(d(e,B)||Q(e,B,v(1,{})),e[B][r]=!0),ie(e,r,n)):Q(e,r,n)},ae=function(e,t){p(e);var n=m(t),r=b(n).concat(de(n));return $(r,(function(t){l&&!s(le,n,t)||oe(e,t,n[t])})),e},le=function(e){var t=g(e),n=s(Y,this,t);return!(this===H&&d(ee,t)&&!d(te,t))&&(!(n||!d(this,t)||!d(ee,t)||d(this,B)&&this[B][t])||n)},ce=function(e,t){var n=m(e),r=g(t);if(n!==H||!d(ee,r)||d(te,r)){var i=J(n,r);return!i||!d(ee,r)||d(n,B)&&n[B][r]||(i.enumerable=!0),i}},ue=function(e){var t=X(m(e)),n=[];return $(t,(function(e){d(ee,e)||d(L,e)||Z(n,e)})),n},de=function(e){var t=e===H,n=X(t?te:m(e)),r=[];return $(n,(function(e){!d(ee,e)||t&&!d(H,e)||Z(r,ee[e])})),r};c||(x(z=(K=function(){if(h(z,this))throw G("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?f(arguments[0]):void 0,t=F(e),n=function(e){this===H&&s(n,te,e),d(this,B)&&d(this[B],t)&&(this[B][t]=!1),ie(this,t,v(1,e))};return l&&re&&ie(H,t,{configurable:!0,set:n}),se(t,e)}).prototype,"toString",(function(){return U(this).tag})),x(K,"withoutSetter",(function(e){return se(F(e),e)})),k.f=le,C.f=oe,S.f=ae,A.f=ce,w.f=O.f=ue,E.f=de,P.f=function(e){return se(N(e),e)},l&&(T(z,"description",{configurable:!0,get:function(){return U(this).description}}),a||x(H,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),$(b(ne),(function(e){_(e)})),r({target:V,stat:!0,forced:!c},{useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(e,t){return void 0===t?y(e):ae(y(e),t)},defineProperty:oe,defineProperties:ae,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ue}),j(),D(K,V),L[B]=!0},1817:(e,t,n)=>{"use strict";var r=n(2109),i=n(9781),s=n(7854),o=n(1702),a=n(2597),l=n(614),c=n(7976),u=n(1340),d=n(7045),h=n(9920),p=s.Symbol,m=p&&p.prototype;if(i&&l(p)&&(!("description"in m)||void 0!==p().description)){var g={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(m,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(f,p),f.prototype=m,m.constructor=f;var v="Symbol(test)"==String(p("test")),y=o(m.valueOf),b=o(m.toString),w=/^Symbol\((.*)\)[^)]+$/,O=o("".replace),E=o("".slice);d(m,"description",{configurable:!0,get:function(){var e=y(this);if(a(g,e))return"";var t=b(e),n=v?E(t,7,-1):O(t,w,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:f})}},763:(e,t,n)=>{var r=n(2109),i=n(5005),s=n(2597),o=n(1340),a=n(2309),l=n(2015),c=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=o(e);if(s(c,t))return c[t];var n=i("Symbol")(t);return c[t]=n,u[n]=t,n}})},2165:(e,t,n)=>{n(6800)("iterator")},2526:(e,t,n)=>{n(4032),n(763),n(6620),n(8862),n(9660)},6620:(e,t,n)=>{var r=n(2109),i=n(2597),s=n(2190),o=n(6330),a=n(2309),l=n(2015),c=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!s(e))throw TypeError(o(e)+" is not a symbol");if(i(c,e))return c[e]}})},3948:(e,t,n)=>{var r=n(7854),i=n(8324),s=n(8509),o=n(6992),a=n(8880),l=n(5112),c=l("iterator"),u=l("toStringTag"),d=o.values,h=function(e,t){if(e){if(e[c]!==d)try{a(e,c,d)}catch(t){e[c]=d}if(e[u]||a(e,u,t),i[t])for(var n in o)if(e[n]!==o[n])try{a(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var p in i)h(r[p]&&r[p].prototype,p);h(s,"DOMTokenList")},4183:function(e){e.exports=function(){"use strict";function e(e,t){e.split(/\s+/).forEach((e=>{t(e)}))}class t{constructor(){this._events=void 0,this._events={}}on(t,n){e(t,(e=>{const t=this._events[e]||[];t.push(n),this._events[e]=t}))}off(t,n){var r=arguments.length;0!==r?e(t,(e=>{if(1===r)return void delete this._events[e];const t=this._events[e];void 0!==t&&(t.splice(t.indexOf(n),1),this._events[e]=t)})):this._events={}}trigger(t,...n){var r=this;e(t,(e=>{const t=r._events[e];void 0!==t&&t.forEach((e=>{e.apply(r,n)}))}))}}function n(e){return e.plugins={},class extends e{constructor(...e){super(...e),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,n){e.plugins[t]={name:t,fn:n}}initializePlugins(e){var t,n;const r=this,i=[];if(Array.isArray(e))e.forEach((e=>{"string"==typeof e?i.push(e):(r.plugins.settings[e.name]=e.options,i.push(e.name))}));else if(e)for(t in e)e.hasOwnProperty(t)&&(r.plugins.settings[t]=e[t],i.push(t));for(;n=i.shift();)r.require(n)}loadPlugin(t){var n=this,r=n.plugins,i=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');r.requested[t]=!0,r.loaded[t]=i.fn.apply(n,[n.plugins.settings[t]||{}]),r.names.push(t)}require(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]}}}const r=e=>(e=e.filter(Boolean)).length<2?e[0]||"":1==l(e)?"["+e.join("")+"]":"(?:"+e.join("|")+")",i=e=>{if(!o(e))return e.join("");let t="",n=0;const r=()=>{n>1&&(t+="{"+n+"}")};return e.forEach(((i,s)=>{i!==e[s-1]?(r(),t+=i,n=1):n++})),r(),t},s=e=>{let t=u(e);return r(t)},o=e=>new Set(e).size!==e.length,a=e=>(e+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),l=e=>e.reduce(((e,t)=>Math.max(e,c(t))),0),c=e=>u(e).length,u=e=>Array.from(e),d=e=>{if(1===e.length)return[[e]];let t=[];const n=e.substring(1);return d(n).forEach((function(n){let r=n.slice(0);r[0]=e.charAt(0)+r[0],t.push(r),r=n.slice(0),r.unshift(e.charAt(0)),t.push(r)})),t},h=[[0,65535]],p="[-]";let m,g;const f=3,v={},y={"/":"",0:"",a:"",aa:"",ae:"",ao:"",au:"",av:"",ay:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",oe:"",oi:"",oo:"",ou:"",p:"",q:"",r:"",s:"",t:"",th:"",tz:"",u:"",v:"",vy:"",w:"",y:"",z:"",hv:""};for(let e in y){let t=y[e]||"";for(let n=0;n<t.length;n++){let r=t.substring(n,n+1);v[r]=e}}const b=new RegExp(Object.keys(v).join("|")+"|"+p,"gu"),w=e=>{void 0===m&&(m=k(e||h))},O=(e,t="NFKD")=>e.normalize(t),E=e=>u(e).reduce(((e,t)=>e+A(t)),""),A=e=>(e=O(e).toLowerCase().replace(b,(e=>v[e]||"")),O(e,"NFC"));function*C(e){for(const[t,n]of e)for(let e=t;e<=n;e++){let t=String.fromCharCode(e),n=E(t);n!=t.toLowerCase()&&(n.length>f||0!=n.length&&(yield{folded:n,composed:t,code_point:e}))}}const S=e=>{const t={},n=(e,n)=>{const r=t[e]||new Set,i=new RegExp("^"+s(r)+"$","iu");n.match(i)||(r.add(a(n)),t[e]=r)};for(let t of C(e))n(t.folded,t.folded),n(t.folded,t.composed);return t},k=e=>{const t=S(e),n={};let i=[];for(let e in t){let r=t[e];r&&(n[e]=s(r)),e.length>1&&i.push(a(e))}i.sort(((e,t)=>t.length-e.length));const o=r(i);return g=new RegExp("^"+o,"u"),n},x=(e,t=1)=>{let n=0;return e=e.map((e=>(m[e]&&(n+=e.length),m[e]||e))),n>=t?i(e):""},T=(e,t=1)=>(t=Math.max(t,e.length-1),r(d(e).map((e=>x(e,t))))),M=(e,t=!0)=>{let n=e.length>1?1:0;return r(e.map((e=>{let r=[];const s=t?e.length():e.length()-1;for(let t=0;t<s;t++)r.push(T(e.substrs[t]||"",n));return i(r)})))},I=(e,t)=>{for(const n of t){if(n.start!=e.start||n.end!=e.end)continue;if(n.substrs.join("")!==e.substrs.join(""))continue;let t=e.parts;const r=e=>{for(const n of t){if(n.start===e.start&&n.substr===e.substr)return!1;if(1!=e.length&&1!=n.length){if(e.start<n.start&&e.end>n.start)return!0;if(n.start<e.start&&n.end>e.start)return!0}}return!1};if(!(n.parts.filter(r).length>0))return!0}return!1};class L{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(e,t){let n=new L,r=JSON.parse(JSON.stringify(this.parts)),i=r.pop();for(const e of r)n.add(e);let s=t.substr.substring(0,e-i.start),o=s.length;return n.add({start:i.start,end:i.start+o,length:o,substr:s}),n}}const F=e=>{w(),e=E(e);let t="",n=[new L];for(let r=0;r<e.length;r++){let i=e.substring(r).match(g);const s=e.substring(r,r+1),o=i?i[0]:null;let a=[],l=new Set;for(const e of n){const t=e.last();if(!t||1==t.length||t.end<=r)if(o){const t=o.length;e.add({start:r,end:r+t,length:t,substr:o}),l.add("1")}else e.add({start:r,end:r+1,length:1,substr:s}),l.add("2");else if(o){let n=e.clone(r,t);const i=o.length;n.add({start:r,end:r+i,length:i,substr:o}),a.push(n)}else l.add("3")}if(a.length>0){a=a.sort(((e,t)=>e.length()-t.length()));for(let e of a)I(e,n)||n.push(e)}else if(r>0&&1==l.size&&!l.has("3")){t+=M(n,!1);let e=new L;const r=n[0];r&&e.add(r.last()),n=[e]}}return t+=M(n,!0),t},N=(e,t)=>{if(e)return e[t]},P=(e,t)=>{if(e){for(var n,r=t.split(".");(n=r.shift())&&(e=e[n]););return e}},_=(e,t,n)=>{var r,i;return e?(e+="",null==t.regex||-1===(i=e.search(t.regex))?0:(r=t.string.length/e.length,0===i&&(r+=.5),r*n)):0},j=(e,t)=>{var n=e[t];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(e[t]=[n])},D=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},R=(e,t)=>"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=E(e+"").toLowerCase())>(t=E(t+"").toLowerCase())?1:t>e?-1:0;class ${constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,n){if(!e||!e.length)return[];const r=[],i=e.split(/\s+/);var s;return n&&(s=new RegExp("^("+Object.keys(n).map(a).join("|")+"):(.*)$")),i.forEach((e=>{let n,i=null,o=null;s&&(n=e.match(s))&&(i=n[1],e=n[2]),e.length>0&&(o=this.settings.diacritics?F(e)||null:a(e),o&&t&&(o="\\b"+o)),r.push({string:e,regex:o?new RegExp(o,"iu"):null,field:i})})),r}getScoreFunction(e,t){var n=this.prepareSearch(e,t);return this._getScoreFunction(n)}_getScoreFunction(e){const t=e.tokens,n=t.length;if(!n)return function(){return 0};const r=e.options.fields,i=e.weights,s=r.length,o=e.getAttrFn;if(!s)return function(){return 1};const a=1===s?function(e,t){const n=r[0].field;return _(o(t,n),e,i[n]||1)}:function(e,t){var n=0;if(e.field){const r=o(t,e.field);!e.regex&&r?n+=1/s:n+=_(r,e,1)}else D(i,((r,i)=>{n+=_(o(t,i),e,r)}));return n/s};return 1===n?function(e){return a(t[0],e)}:"and"===e.options.conjunction?function(e){var r,i=0;for(let n of t){if((r=a(n,e))<=0)return 0;i+=r}return i/n}:function(e){var r=0;return D(t,(t=>{r+=a(t,e)})),r/n}}getSortFunction(e,t){var n=this.prepareSearch(e,t);return this._getSortFunction(n)}_getSortFunction(e){var t,n=[];const r=this,i=e.options,s=!e.query&&i.sort_empty?i.sort_empty:i.sort;if("function"==typeof s)return s.bind(this);const o=function(t,n){return"$score"===t?n.score:e.getAttrFn(r.items[n.id],t)};if(s)for(let t of s)(e.query||"$score"!==t.field)&&n.push(t);if(e.query){t=!0;for(let e of n)if("$score"===e.field){t=!1;break}t&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter((e=>"$score"!==e.field));return n.length?function(e,t){var r,i;for(let s of n)if(i=s.field,r=("desc"===s.direction?-1:1)*R(o(i,e),o(i,t)))return r;return 0}:null}prepareSearch(e,t){const n={};var r=Object.assign({},t);if(j(r,"sort"),j(r,"sort_empty"),r.fields){j(r,"fields");const e=[];r.fields.forEach((t=>{"string"==typeof t&&(t={field:t,weight:1}),e.push(t),n[t.field]="weight"in t?t.weight:1})),r.fields=e}return{options:r,query:e.toLowerCase().trim(),tokens:this.tokenize(e,r.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:r.nesting?P:N}}search(e,t){var n,r,i=this;r=this.prepareSearch(e,t),t=r.options,e=r.query;const s=t.score||i._getScoreFunction(r);e.length?D(i.items,((e,i)=>{n=s(e),(!1===t.filter||n>0)&&r.items.push({score:n,id:i})})):D(i.items,((e,t)=>{r.items.push({score:1,id:t})}));const o=i._getSortFunction(r);return o&&r.items.sort(o),r.total=r.items.length,"number"==typeof t.limit&&(r.items=r.items.slice(0,t.limit)),r}}const B=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},V=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(q(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},q=e=>"string"==typeof e&&e.indexOf("<")>-1,U=e=>e.replace(/['"\\]/g,"\\$&"),H=(e,t)=>{var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)},K=(e,t)=>{Object.assign(e.style,t)},z=(e,...t)=>{var n=W(t);(e=J(e)).map((e=>{n.map((t=>{e.classList.add(t)}))}))},G=(e,...t)=>{var n=W(t);(e=J(e)).map((e=>{n.map((t=>{e.classList.remove(t)}))}))},W=e=>{var t=[];return B(e,(e=>{"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))})),t.filter(Boolean)},J=e=>(Array.isArray(e)||(e=[e]),e),Q=(e,t,n)=>{if(!n||n.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},X=(e,t=0)=>t>0?e[e.length-1]:e[0],Y=e=>0===Object.keys(e).length,Z=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n},ee=(e,t)=>{B(t,((t,n)=>{null==t?e.removeAttribute(n):e.setAttribute(n,""+t)}))},te=(e,t)=>{e.parentNode&&e.parentNode.replaceChild(t,e)},ne=(e,t)=>{if(null===t)return;if("string"==typeof t){if(!t.length)return;t=new RegExp(t,"i")}const n=e=>{var n=e.data.match(t);if(n&&e.data.length>0){var r=document.createElement("span");r.className="highlight";var i=e.splitText(n.index);i.splitText(n[0].length);var s=i.cloneNode(!0);return r.appendChild(s),te(i,r),1}return 0},r=e=>{1!==e.nodeType||!e.childNodes||/(script|style)/i.test(e.tagName)||"highlight"===e.className&&"SPAN"===e.tagName||Array.from(e.childNodes).forEach((e=>{i(e)}))},i=e=>3===e.nodeType?n(e):(r(e),0);i(e)},re=e=>{var t=e.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,(function(e){var t=e.parentNode;t.replaceChild(e.firstChild,e),t.normalize()}))},ie=65,se=13,oe=27,ae=37,le=38,ce=39,ue=40,de=8,he=46,pe=9,me="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var ge={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}};const fe=e=>null==e?null:ve(e),ve=e=>"boolean"==typeof e?e?"1":"0":e+"",ye=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),be=(e,t)=>t>0?setTimeout(e,t):(e.call(null),null),we=(e,t)=>{var n;return function(r,i){var s=this;n&&(s.loading=Math.max(s.loading-1,0),clearTimeout(n)),n=setTimeout((function(){n=null,s.loadedSearches[r]=!0,e.call(s,r,i)}),t)}},Oe=(e,t,n)=>{var r,i=e.trigger,s={};for(r of(e.trigger=function(){var n=arguments[0];if(-1===t.indexOf(n))return i.apply(e,arguments);s[n]=arguments},n.apply(e,[]),e.trigger=i,t))r in s&&i.apply(e,s[r])},Ee=e=>({start:e.selectionStart||0,length:(e.selectionEnd||0)-(e.selectionStart||0)}),Ae=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},Ce=(e,t,n,r)=>{e.addEventListener(t,n,r)},Se=(e,t)=>!!t&&!!t[e]&&1==(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0),ke=(e,t)=>{const n=e.getAttribute("id");return n||(e.setAttribute("id",t),t)},xe=e=>e.replace(/[\\"']/g,"\\$&"),Te=(e,t)=>{t&&e.append(t)};function Me(e,t){var n=Object.assign({},ge,t),r=n.dataAttr,i=n.labelField,s=n.valueField,o=n.disabledField,a=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField,u=e.tagName.toLowerCase(),d=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!d&&!n.allowEmptyOption){let t=e.querySelector('option[value=""]');t&&(d=t.textContent)}var h={placeholder:d,options:[],optgroups:[],items:[],maxItems:null},p=()=>{const t=e.getAttribute(r);if(t)h.options=JSON.parse(t),B(h.options,(e=>{h.items.push(e[s])}));else{var o=e.value.trim()||"";if(!n.allowEmptyOption&&!o.length)return;const t=o.split(n.delimiter);B(t,(e=>{const t={};t[i]=e,t[s]=e,h.options.push(t)})),h.items=t}};return"select"===u?(()=>{var t,u=h.options,d={},p=1;let m=0;var g=e=>{var t=Object.assign({},e.dataset),n=r&&t[r];return"string"==typeof n&&n.length&&(t=Object.assign(t,JSON.parse(n))),t},f=(e,t)=>{var r=fe(e.value);if(null!=r&&(r||n.allowEmptyOption)){if(d.hasOwnProperty(r)){if(t){var l=d[r][a];l?Array.isArray(l)?l.push(t):d[r][a]=[l,t]:d[r][a]=t}}else{var c=g(e);c[i]=c[i]||e.textContent,c[s]=c[s]||r,c[o]=c[o]||e.disabled,c[a]=c[a]||t,c.$option=e,c.$order=c.$order||++m,d[r]=c,u.push(c)}e.selected&&h.items.push(r)}},v=e=>{var t,n;(n=g(e))[l]=n[l]||e.getAttribute("label")||"",n[c]=n[c]||p++,n[o]=n[o]||e.disabled,n.$order=n.$order||++m,h.optgroups.push(n),t=n[c],B(e.children,(e=>{f(e,t)}))};h.maxItems=e.hasAttribute("multiple")?null:1,B(e.children,(e=>{"optgroup"===(t=e.tagName.toLowerCase())?v(e):"option"===t&&f(e)}))})():p(),Object.assign({},ge,h,t)}var Ie=0;class Le extends(n(t)){constructor(e,t){var n;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,Ie++;var r=V(e);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this,n=(window.getComputedStyle&&window.getComputedStyle(r,null)).getPropertyValue("direction");const i=Me(r,t);this.settings=i,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag="select"===r.tagName.toLowerCase(),this.rtl=/rtl/i.test(n),this.inputId=ke(r,"tomselect-"+Ie),this.isRequired=r.required,this.sifter=new $(this.options,{diacritics:i.diacritics}),i.mode=i.mode||(1===i.maxItems?"single":"multi"),"boolean"!=typeof i.hideSelected&&(i.hideSelected="multi"===i.mode),"boolean"!=typeof i.hidePlaceholder&&(i.hidePlaceholder="multi"!==i.mode);var s=i.createFilter;"function"!=typeof s&&("string"==typeof s&&(s=new RegExp(s)),s instanceof RegExp?i.createFilter=e=>s.test(e):i.createFilter=e=>this.settings.duplicates||!this.options[e]),this.initializePlugins(i.plugins),this.setupCallbacks(),this.setupTemplates();const o=V("<div>"),a=V("<div>"),l=this._render("dropdown"),c=V('<div role="listbox" tabindex="-1">'),u=this.input.getAttribute("class")||"",d=i.mode;var h;z(o,i.wrapperClass,u,d),z(a,i.controlClass),Te(o,a),z(l,i.dropdownClass,d),i.copyClassesToDropdown&&z(l,u),z(c,i.dropdownContentClass),Te(l,c),V(i.dropdownParent||o).appendChild(l),q(i.controlInput)?(h=V(i.controlInput),D(["autocorrect","autocapitalize","autocomplete","spellcheck"],(e=>{r.getAttribute(e)&&ee(h,{[e]:r.getAttribute(e)})})),h.tabIndex=-1,a.appendChild(h),this.focus_node=h):i.controlInput?(h=V(i.controlInput),this.focus_node=h):(h=V("<input/>"),this.focus_node=a),this.wrapper=o,this.dropdown=l,this.dropdown_content=c,this.control=a,this.control_input=h,this.setup()}setup(){const e=this,t=e.settings,n=e.control_input,r=e.dropdown,i=e.dropdown_content,s=e.wrapper,o=e.control,l=e.input,c=e.focus_node,u={passive:!0},d=e.inputId+"-ts-dropdown";ee(i,{id:d}),ee(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":d});const h=ke(c,e.inputId+"-ts-control"),p="label[for='"+U(e.inputId)+"']",m=document.querySelector(p),g=e.focus.bind(e);if(m){Ce(m,"click",g),ee(m,{for:h});const t=ke(m,e.inputId+"-ts-label");ee(c,{"aria-labelledby":t}),ee(i,{"aria-labelledby":t})}if(s.style.width=l.style.width,e.plugins.names.length){const t="plugin-"+e.plugins.names.join(" plugin-");z([s,r],t)}(null===t.maxItems||t.maxItems>1)&&e.is_select_tag&&ee(l,{multiple:"multiple"}),t.placeholder&&ee(n,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+a(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=we(t.load,t.loadThrottle)),Ce(r,"mousemove",(()=>{e.ignoreHover=!1})),Ce(r,"mouseenter",(t=>{var n=Q(t.target,"[data-selectable]",r);n&&e.onOptionHover(t,n)}),{capture:!0}),Ce(r,"click",(t=>{const n=Q(t.target,"[data-selectable]");n&&(e.onOptionSelect(t,n),Ae(t,!0))})),Ce(o,"click",(t=>{var r=Q(t.target,"[data-ts-item]",o);r&&e.onItemSelect(t,r)?Ae(t,!0):""==n.value&&(e.onClick(),Ae(t,!0))})),Ce(c,"keydown",(t=>e.onKeyDown(t))),Ce(n,"keypress",(t=>e.onKeyPress(t))),Ce(n,"input",(t=>e.onInput(t))),Ce(c,"blur",(t=>e.onBlur(t))),Ce(c,"focus",(t=>e.onFocus(t))),Ce(n,"paste",(t=>e.onPaste(t)));const f=t=>{const i=t.composedPath()[0];if(!s.contains(i)&&!r.contains(i))return e.isFocused&&e.blur(),void e.inputState();i==n&&e.isOpen?t.stopPropagation():Ae(t,!0)},v=()=>{e.isOpen&&e.positionDropdown()};Ce(document,"mousedown",f),Ce(window,"scroll",v,u),Ce(window,"resize",v,u),this._destroy=()=>{document.removeEventListener("mousedown",f),window.removeEventListener("scroll",v),window.removeEventListener("resize",v),m&&m.removeEventListener("click",g)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,Ce(l,"invalid",(()=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())})),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,l.disabled?e.disable():l.readOnly?e.setReadOnly(!0):e.enable(),e.on("change",this.onChange),z(l,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),!0===t.preload&&e.preload()}setupOptions(e=[],t=[]){this.addOptions(e),D(t,(e=>{this.registerOptionGroup(e)}))}setupTemplates(){var e=this,t=e.settings.labelField,n=e.settings.optgroupLabelField,r={optgroup:e=>{let t=document.createElement("div");return t.className="optgroup",t.appendChild(e.options),t},optgroup_header:(e,t)=>'<div class="optgroup-header">'+t(e[n])+"</div>",option:(e,n)=>"<div>"+n(e[t])+"</div>",item:(e,n)=>"<div>"+n(e[t])+"</div>",option_create:(e,t)=>'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},r,e.settings.render)}setupCallbacks(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)(t=this.settings[n[e]])&&this.on(e,t)}sync(e=!0){const t=this,n=e?Me(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(n.options,n.optgroups),t.setValue(n.items||[],!0),t.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0)return e.clearActiveItems(),void e.focus();e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){H(this.input,"input"),H(this.input,"change")}onPaste(e){var t=this;t.isInputHidden||t.isLocked?Ae(e):t.settings.splitOn&&setTimeout((()=>{var e=t.inputValue();if(e.match(t.settings.splitOn)){var n=e.trim().split(t.settings.splitOn);D(n,(e=>{fe(e)&&(this.options[e]?t.addItem(e):t.createItem(e))}))}}),0)}onKeyPress(e){var t=this;if(!t.isLocked){var n=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&n===t.settings.delimiter?(t.createItem(),void Ae(e)):void 0}Ae(e)}onKeyDown(e){var t=this;if(t.ignoreHover=!0,t.isLocked)e.keyCode!==pe&&Ae(e);else{switch(e.keyCode){case ie:if(Se(me,e)&&""==t.control_input.value)return Ae(e),void t.selectAll();break;case oe:return t.isOpen&&(Ae(e,!0),t.close()),void t.clearActiveItems();case ue:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let e=t.getAdjacent(t.activeOption,1);e&&t.setActiveOption(e)}return void Ae(e);case le:if(t.activeOption){let e=t.getAdjacent(t.activeOption,-1);e&&t.setActiveOption(e)}return void Ae(e);case se:return void(t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),Ae(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&Ae(e));case ae:return void t.advanceSelection(-1,e);case ce:return void t.advanceSelection(1,e);case pe:return void(t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),Ae(e)),t.settings.create&&t.createItem()&&Ae(e)));case de:case he:return void t.deleteSelection(e)}t.isInputHidden&&!Se(me,e)&&Ae(e)}}onInput(e){if(this.isLocked)return;const t=this.inputValue();this.lastValue!==t&&(this.lastValue=t,""!=t?(this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.refreshTimeout=be((()=>{this.refreshTimeout=null,this._onInput()}),this.settings.refreshThrottle)):this._onInput())}_onInput(){const e=this.lastValue;this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e)}onOptionHover(e,t){this.ignoreHover||this.setActiveOption(t,!1)}onFocus(e){var t=this,n=t.isFocused;if(t.isDisabled||t.isReadOnly)return t.blur(),void Ae(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.preload(),n||t.trigger("focus"),t.activeItems.length||(t.inputState(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){if(!1!==document.hasFocus()){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var n=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,n):n()}}}onOptionSelect(e,t){var n,r=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?r.createItem(null,(()=>{r.settings.closeAfterSelect&&r.close()})):void 0!==(n=t.dataset.value)&&(r.lastQuery=null,r.addItem(n),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&e.type&&/click/.test(e.type)&&r.setActiveOption(t)))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,t){var n=this;return!n.isLocked&&"multi"===n.settings.mode&&(Ae(e),n.setActiveItem(t,e),!0)}canLoad(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}load(e){const t=this;if(!t.canLoad(e))return;z(t.wrapper,t.settings.loadingClass),t.loading++;const n=t.loadCallback.bind(t);t.settings.load.call(t,e,n)}loadCallback(e,t){const n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(e,t),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||G(n.wrapper,n.settings.loadingClass),n.trigger("load",e,t)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var t=this.control_input;t.value!==e&&(t.value=e,H(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){Oe(this,t?[]:["change"],(()=>{this.clear(t),this.addItems(e,t)}))}setMaxItems(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var n,r,i,s,o,a,l=this;if("single"!==l.settings.mode){if(!e)return l.clearActiveItems(),void(l.isFocused&&l.inputState());if("click"===(n=t&&t.type.toLowerCase())&&Se("shiftKey",t)&&l.activeItems.length){for(a=l.getLastActive(),(i=Array.prototype.indexOf.call(l.control.children,a))>(s=Array.prototype.indexOf.call(l.control.children,e))&&(o=i,i=s,s=o),r=i;r<=s;r++)e=l.control.children[r],-1===l.activeItems.indexOf(e)&&l.setActiveItemClass(e);Ae(t)}else"click"===n&&Se(me,t)||"keydown"===n&&Se("shiftKey",t)?e.classList.contains("active")?l.removeActiveItem(e):l.setActiveItemClass(e):(l.clearActiveItems(),l.setActiveItemClass(e));l.inputState(),l.isFocused||l.focus()}}setActiveItemClass(e){const t=this,n=t.control.querySelector(".last-active");n&&G(n,"last-active"),z(e,"active last-active"),t.trigger("item_select",e),-1==t.activeItems.indexOf(e)&&t.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),G(e,"active")}clearActiveItems(){G(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,t=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,ee(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),ee(e,{"aria-selected":"true"}),z(e,"active"),t&&this.scrollToOption(e)))}scrollToOption(e,t){if(!e)return;const n=this.dropdown_content,r=n.clientHeight,i=n.scrollTop||0,s=e.offsetHeight,o=e.getBoundingClientRect().top-n.getBoundingClientRect().top+i;o+s>r+i?this.scroll(o-r+s,t):o<i&&this.scroll(o,t)}scroll(e,t){const n=this.dropdown_content;t&&(n.style.scrollBehavior=t),n.scrollTop=e,n.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(G(this.activeOption,"active"),ee(this.activeOption,{"aria-selected":null})),this.activeOption=null,ee(this.focus_node,{"aria-activedescendant":null})}selectAll(){const e=this;if("single"===e.settings.mode)return;const t=e.controlChildren();t.length&&(e.inputState(),e.close(),e.activeItems=t,D(t,(t=>{e.setActiveItemClass(t)})))}inputState(){var e=this;e.control.contains(e.control_input)&&(ee(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&ee(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||e.isReadOnly||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout((()=>{e.ignoreFocus=!1,e.onFocus()}),0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,n,r=this,i=this.getSearchOptions();if(r.settings.score&&"function"!=typeof(n=r.settings.score.call(r,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==r.lastQuery?(r.lastQuery=e,t=r.sifter.search(e,Object.assign(i,{score:n})),r.currentResults=t):t=Object.assign({},r.currentResults),r.settings.hideSelected&&(t.items=t.items.filter((e=>{let t=fe(e.id);return!(t&&-1!==r.items.indexOf(t))}))),t}refreshOptions(e=!0){var t,n,r,i,s,o,a,l,c,u;const d={},h=[];var p=this,m=p.inputValue();const g=m===p.lastQuery||""==m&&null==p.lastQuery;var f=p.search(m),v=null,y=p.settings.shouldOpen||!1,b=p.dropdown_content;g&&(v=p.activeOption)&&(c=v.closest("[data-group]")),i=f.items.length,"number"==typeof p.settings.maxOptions&&(i=Math.min(i,p.settings.maxOptions)),i>0&&(y=!0);const w=(e,t)=>{let n=d[e];if(void 0!==n){let e=h[n];if(void 0!==e)return[n,e.fragment]}let r=document.createDocumentFragment();return n=h.length,h.push({fragment:r,order:t,optgroup:e}),[n,r]};for(t=0;t<i;t++){let e=f.items[t];if(!e)continue;let i=e.id,a=p.options[i];if(void 0===a)continue;let l=ve(i),u=p.getOption(l,!0);for(p.settings.hideSelected||u.classList.toggle("selected",p.items.includes(l)),s=a[p.settings.optgroupField]||"",n=0,r=(o=Array.isArray(s)?s:[s])&&o.length;n<r;n++){s=o[n];let e=a.$order,t=p.optgroups[s];void 0===t?s="":e=t.$order;const[r,l]=w(s,e);n>0&&(u=u.cloneNode(!0),ee(u,{id:a.$id+"-clone-"+n,"aria-selected":null}),u.classList.add("ts-cloned"),G(u,"active"),p.activeOption&&p.activeOption.dataset.value==i&&c&&c.dataset.group===s.toString()&&(v=u)),l.appendChild(u),""!=s&&(d[s]=r)}}p.settings.lockOptgroupOrder&&h.sort(((e,t)=>e.order-t.order)),a=document.createDocumentFragment(),D(h,(e=>{let t=e.fragment,n=e.optgroup;if(!t||!t.children.length)return;let r=p.optgroups[n];if(void 0!==r){let e=document.createDocumentFragment(),n=p.render("optgroup_header",r);Te(e,n),Te(e,t);let i=p.render("optgroup",{group:r,options:e});Te(a,i)}else Te(a,t)})),b.innerHTML="",Te(b,a),p.settings.highlight&&(re(b),f.query.length&&f.tokens.length&&D(f.tokens,(e=>{ne(b,e.regex)})));var O=e=>{let t=p.render(e,{input:m});return t&&(y=!0,b.insertBefore(t,b.firstChild)),t};if(p.loading?O("loading"):p.settings.shouldLoad.call(p,m)?0===f.items.length&&O("no_results"):O("not_loading"),(l=p.canCreate(m))&&(u=O("option_create")),p.hasOptions=f.items.length>0||l,y){if(f.items.length>0){if(v||"single"!==p.settings.mode||null==p.items[0]||(v=p.getOption(p.items[0])),!b.contains(v)){let e=0;u&&!p.settings.addPrecedence&&(e=1),v=p.selectable()[e]}}else u&&(v=u);e&&!p.isOpen&&(p.open(),p.scrollToOption(v,"auto")),p.setActiveOption(v)}else p.clearActiveOption(),e&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,t=!1){const n=this;if(Array.isArray(e))return n.addOptions(e,t),!1;const r=fe(e[n.settings.valueField]);return null!==r&&!n.options.hasOwnProperty(r)&&(e.$order=e.$order||++n.order,e.$id=n.inputId+"-opt-"+e.$order,n.options[r]=e,n.lastQuery=null,t&&(n.userOptions[r]=t,n.trigger("option_add",r,e)),r)}addOptions(e,t=!1){D(e,(e=>{this.addOption(e,t)}))}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var t=fe(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var n;t[this.settings.optgroupValueField]=e,(n=this.registerOptionGroup(t))&&this.trigger("optgroup_add",n,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){const n=this;var r,i;const s=fe(e),o=fe(t[n.settings.valueField]);if(null===s)return;const a=n.options[s];if(null==a)return;if("string"!=typeof o)throw new Error("Value must be set in option data");const l=n.getOption(s),c=n.getItem(s);if(t.$order=t.$order||a.$order,delete n.options[s],n.uncacheValue(o),n.options[o]=t,l){if(n.dropdown_content.contains(l)){const e=n._render("option",t);te(l,e),n.activeOption===l&&n.setActiveOption(e)}l.remove()}c&&(-1!==(i=n.items.indexOf(s))&&n.items.splice(i,1,o),r=n._render("item",t),c.classList.contains("active")&&z(r,"active"),te(c,r)),n.lastQuery=null}removeOption(e,t){const n=this;e=ve(e),n.uncacheValue(e),delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)}clearOptions(e){const t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const n={};D(this.options,((e,r)=>{t(e,r)&&(n[r]=e)})),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,t){return this.items.indexOf(t)>=0}getOption(e,t=!1){const n=fe(e);if(null===n)return null;const r=this.options[n];if(null!=r){if(r.$div)return r.$div;if(t)return this._render("option",r)}return null}getAdjacent(e,t,n="option"){var r,i=this;if(!e)return null;r="item"==n?i.controlChildren():i.dropdown_content.querySelectorAll("[data-selectable]");for(let n=0;n<r.length;n++)if(r[n]==e)return t>0?r[n+1]:r[n-1];return null}getItem(e){if("object"==typeof e)return e;var t=fe(e);return null!==t?this.control.querySelector(`[data-value="${xe(t)}"]`):null}addItems(e,t){var n=this,r=Array.isArray(e)?e:[e];const i=(r=r.filter((e=>-1===n.items.indexOf(e))))[r.length-1];r.forEach((e=>{n.isPending=e!==i,n.addItem(e,t)}))}addItem(e,t){Oe(this,t?[]:["change","dropdown_close"],(()=>{var n,r;const i=this,s=i.settings.mode,o=fe(e);if((!o||-1===i.items.indexOf(o)||("single"===s&&i.close(),"single"!==s&&i.settings.duplicates))&&null!==o&&i.options.hasOwnProperty(o)&&("single"===s&&i.clear(t),"multi"!==s||!i.isFull())){if(n=i._render("item",i.options[o]),i.control.contains(n)&&(n=n.cloneNode(!0)),r=i.isFull(),i.items.splice(i.caretPos,0,o),i.insertAtCaret(n),i.isSetup){if(!i.isPending&&i.settings.hideSelected){let e=i.getOption(o),t=i.getAdjacent(e,1);t&&i.setActiveOption(t)}i.isPending||i.settings.closeAfterSelect||i.refreshOptions(i.isFocused&&"single"!==s),0!=i.settings.closeAfterSelect&&i.isFull()?i.close():i.isPending||i.positionDropdown(),i.trigger("item_add",o,n),i.isPending||i.updateOriginalInput({silent:t})}(!i.isPending||!r&&i.isFull())&&(i.inputState(),i.refreshState())}}))}removeItem(e=null,t){const n=this;if(!(e=n.getItem(e)))return;var r,i;const s=e.dataset.value;r=Z(e),e.remove(),e.classList.contains("active")&&(i=n.activeItems.indexOf(e),n.activeItems.splice(i,1),G(e,"active")),n.items.splice(r,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(s)&&n.removeOption(s,t),r<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:t}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",s,e)}createItem(e=null,t=(()=>{})){3===arguments.length&&(t=arguments[2]),"function"!=typeof t&&(t=()=>{});var n,r=this,i=r.caretPos;if(e=e||r.inputValue(),!r.canCreate(e))return t(),!1;r.lock();var s=!1,o=e=>{if(r.unlock(),!e||"object"!=typeof e)return t();var n=fe(e[r.settings.valueField]);if("string"!=typeof n)return t();r.setTextboxValue(),r.addOption(e,!0),r.setCaret(i),r.addItem(n),t(e),s=!0};return n="function"==typeof r.settings.create?r.settings.create.call(this,e,o):{[r.settings.labelField]:e,[r.settings.valueField]:e},s||o(n),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){const e=this;e.refreshValidityState();const t=e.isFull(),n=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);const r=e.wrapper.classList;r.toggle("focus",e.isFocused),r.toggle("disabled",e.isDisabled),r.toggle("readonly",e.isReadOnly),r.toggle("required",e.isRequired),r.toggle("invalid",!e.isValid),r.toggle("locked",n),r.toggle("full",t),r.toggle("input-active",e.isFocused&&!e.isInputHidden),r.toggle("dropdown-active",e.isOpen),r.toggle("has-options",Y(e.options)),r.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){const t=this;var n,r;const i=t.input.querySelector('option[value=""]');if(t.is_select_tag){const s=[],o=t.input.querySelectorAll("option:checked").length;function a(e,n,r){return e||(e=V('<option value="'+ye(n)+'">'+ye(r)+"</option>")),e!=i&&t.input.append(e),s.push(e),(e!=i||o>0)&&(e.selected=!0),e}t.input.querySelectorAll("option:checked").forEach((e=>{e.selected=!1})),0==t.items.length&&"single"==t.settings.mode?a(i,"",""):t.items.forEach((e=>{n=t.options[e],r=n[t.settings.labelField]||"",s.includes(n.$option)?a(t.input.querySelector(`option[value="${xe(e)}"]:not(:checked)`),e,r):n.$option=a(n.$option,e,r)}))}else t.input.value=t.getValue();t.isSetup&&(e.silent||t.trigger("change",t.getValue()))}open(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,ee(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),K(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),K(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,n=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&t.inputState()),t.isOpen=!1,ee(t.focus_node,{"aria-expanded":"false"}),K(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),n&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),n=e.offsetHeight+t.top+window.scrollY,r=t.left+window.scrollX;K(this.dropdown,{width:t.width+"px",top:n+"px",left:r+"px"})}}clear(e){var t=this;if(t.items.length){var n=t.controlChildren();D(n,(e=>{t.removeItem(e,!0)})),t.inputState(),e||t.updateOriginalInput(),t.trigger("clear")}}insertAtCaret(e){const t=this,n=t.caretPos,r=t.control;r.insertBefore(e,r.children[n]||null),t.setCaret(n+1)}deleteSelection(e){var t,n,r,i,s=this;t=e&&e.keyCode===de?-1:1,n=Ee(s.control_input);const o=[];if(s.activeItems.length)i=X(s.activeItems,t),r=Z(i),t>0&&r++,D(s.activeItems,(e=>o.push(e)));else if((s.isFocused||"single"===s.settings.mode)&&s.items.length){const e=s.controlChildren();let r;t<0&&0===n.start&&0===n.length?r=e[s.caretPos-1]:t>0&&n.start===s.inputValue().length&&(r=e[s.caretPos]),void 0!==r&&o.push(r)}if(!s.shouldDelete(o,e))return!1;for(Ae(e,!0),void 0!==r&&s.setCaret(r);o.length;)s.removeItem(o.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(e,t){const n=e.map((e=>e.dataset.value));return!(!n.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(n,t))}advanceSelection(e,t){var n,r,i=this;i.rtl&&(e*=-1),i.inputValue().length||(Se(me,t)||Se("shiftKey",t)?(r=(n=i.getLastActive(e))?n.classList.contains("active")?i.getAdjacent(n,e,"item"):n:e>0?i.control_input.nextElementSibling:i.control_input.previousElementSibling)&&(r.classList.contains("active")&&i.removeActiveItem(n),i.setActiveItemClass(r)):i.moveCaret(e))}moveCaret(e){}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var n=this.control.querySelectorAll(".active");return n?X(n,e):void 0}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(e=this.isReadOnly||this.isDisabled){this.isLocked=e,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(e){this.focus_node.tabIndex=e?-1:this.tabIndex,this.isDisabled=e,this.input.disabled=e,this.control_input.disabled=e,this.setLocked()}setReadOnly(e){this.isReadOnly=e,this.input.readOnly=e,this.control_input.readOnly=e,this.setLocked()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,G(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,t){var n,r;const i=this;if("function"!=typeof this.settings.render[e])return null;if(!(r=i.settings.render[e].call(this,t,ye)))return null;if(r=V(r),"option"===e||"option_create"===e?t[i.settings.disabledField]?ee(r,{"aria-disabled":"true"}):ee(r,{"data-selectable":""}):"optgroup"===e&&(n=t.group[i.settings.optgroupValueField],ee(r,{"data-group":n}),t.group[i.settings.disabledField]&&ee(r,{"data-disabled":""})),"option"===e||"item"===e){const n=ve(t[i.settings.valueField]);ee(r,{"data-value":n}),"item"===e?(z(r,i.settings.itemClass),ee(r,{"data-ts-item":""})):(z(r,i.settings.optionClass),ee(r,{role:"option",id:t.$id}),t.$div=r,i.options[n]=t)}return r}_render(e,t){const n=this.render(e,t);if(null==n)throw"HTMLElement expected";return n}clearCache(){D(this.options,(e=>{e.$div&&(e.$div.remove(),delete e.$div)}))}uncacheValue(e){const t=this.getOption(e);t&&t.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,t,n){var r=this,i=r[t];r[t]=function(){var t,s;return"after"===e&&(t=i.apply(r,arguments)),s=n.apply(r,arguments),"instead"===e?s:("before"===e&&(t=i.apply(r,arguments)),t)}}}function Fe(){Ce(this.input,"change",(()=>{this.sync()}))}function Ne(e){var t=this,n=t.onOptionSelect;t.settings.hideSelected=!1;const r=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},e);var i=function(e,t){t?(e.checked=!0,r.uncheckedClassNames&&e.classList.remove(...r.uncheckedClassNames),r.checkedClassNames&&e.classList.add(...r.checkedClassNames)):(e.checked=!1,r.checkedClassNames&&e.classList.remove(...r.checkedClassNames),r.uncheckedClassNames&&e.classList.add(...r.uncheckedClassNames))},s=function(e){setTimeout((()=>{var t=e.querySelector("input."+r.className);t instanceof HTMLInputElement&&i(t,e.classList.contains("selected"))}),1)};t.hook("after","setupTemplates",(()=>{var e=t.settings.render.option;t.settings.render.option=(n,s)=>{var o=V(e.call(t,n,s)),a=document.createElement("input");r.className&&a.classList.add(r.className),a.addEventListener("click",(function(e){Ae(e)})),a.type="checkbox";const l=fe(n[t.settings.valueField]);return i(a,!!(l&&t.items.indexOf(l)>-1)),o.prepend(a),o}})),t.on("item_remove",(e=>{var n=t.getOption(e);n&&(n.classList.remove("selected"),s(n))})),t.on("item_add",(e=>{var n=t.getOption(e);n&&s(n)})),t.hook("instead","onOptionSelect",((e,r)=>{if(r.classList.contains("selected"))return r.classList.remove("selected"),t.removeItem(r.dataset.value),t.refreshOptions(),void Ae(e,!0);n.call(t,e,r),s(r)}))}function Pe(e){const t=this,n=Object.assign({className:"clear-button",title:"Clear All",html:e=>`<div class="${e.className}" title="${e.title}">&#10799;</div>`},e);t.on("initialize",(()=>{var e=V(n.html(n));e.addEventListener("click",(e=>{t.isLocked||(t.clear(),"single"===t.settings.mode&&t.settings.allowEmptyOption&&t.addItem(""),e.preventDefault(),e.stopPropagation())})),t.control.appendChild(e)}))}const _e=(e,t)=>{var n;null==(n=e.parentNode)||n.insertBefore(t,e.nextSibling)},je=(e,t)=>{var n;null==(n=e.parentNode)||n.insertBefore(t,e)},De=(e,t)=>{do{var n;if(e==(t=null==(n=t)?void 0:n.previousElementSibling))return!0}while(t&&t.previousElementSibling);return!1};function Re(){var e=this;if("multi"!==e.settings.mode)return;var t=e.lock,n=e.unlock;let r,i=!0;e.hook("after","setupTemplates",(()=>{var t=e.settings.render.item;e.settings.render.item=(n,s)=>{const o=V(t.call(e,n,s));ee(o,{draggable:"true"});const a=e=>{r=o,setTimeout((()=>{o.classList.add("ts-dragging")}),0)},l=e=>{e.preventDefault(),o.classList.add("ts-drag-over"),u(o,r)},c=()=>{o.classList.remove("ts-drag-over")},u=(e,t)=>{void 0!==t&&(De(t,o)?_e(e,t):je(e,t))},d=()=>{var t;document.querySelectorAll(".ts-drag-over").forEach((e=>e.classList.remove("ts-drag-over"))),null==(t=r)||t.classList.remove("ts-dragging"),r=void 0;var n=[];e.control.querySelectorAll("[data-value]").forEach((e=>{if(e.dataset.value){let t=e.dataset.value;t&&n.push(t)}})),e.setValue(n)};return Ce(o,"mousedown",(e=>{i||Ae(e),e.stopPropagation()})),Ce(o,"dragstart",a),Ce(o,"dragenter",l),Ce(o,"dragover",l),Ce(o,"dragleave",c),Ce(o,"dragend",d),o}})),e.hook("instead","lock",(()=>(i=!1,t.call(e)))),e.hook("instead","unlock",(()=>(i=!0,n.call(e))))}function $e(e){const t=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:e=>'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a class="'+e.closeClass+'">&times;</a></div></div>'},e);t.on("initialize",(()=>{var e=V(n.html(n)),r=e.querySelector("."+n.closeClass);r&&r.addEventListener("click",(e=>{Ae(e,!0),t.close()})),t.dropdown.insertBefore(e,t.dropdown.firstChild)}))}function Be(){var e=this;e.hook("instead","setCaret",(t=>{"single"!==e.settings.mode&&e.control.contains(e.control_input)?(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach(((n,r)=>{r<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)})):t=e.items.length,e.caretPos=t})),e.hook("instead","moveCaret",(t=>{if(!e.isFocused)return;const n=e.getLastActive(t);if(n){const r=Z(n);e.setCaret(t>0?r+1:r),e.setActiveItem(),G(n,"last-active")}else e.setCaret(e.caretPos+t)}))}function Ve(){const e=this;e.settings.shouldOpen=!0,e.hook("before","setup",(()=>{e.focus_node=e.control,z(e.control_input,"dropdown-input");const t=V('<div class="dropdown-input-wrap">');t.append(e.control_input),e.dropdown.insertBefore(t,e.dropdown.firstChild);const n=V('<input class="items-placeholder" tabindex="-1" />');n.placeholder=e.settings.placeholder||"",e.control.append(n)})),e.on("initialize",(()=>{e.control_input.addEventListener("keydown",(t=>{switch(t.keyCode){case oe:return e.isOpen&&(Ae(t,!0),e.close()),void e.clearActiveItems();case pe:e.focus_node.tabIndex=-1}return e.onKeyDown.call(e,t)})),e.on("blur",(()=>{e.focus_node.tabIndex=e.isDisabled?-1:e.tabIndex})),e.on("dropdown_open",(()=>{e.control_input.focus()}));const t=e.onBlur;e.hook("instead","onBlur",(n=>{if(!n||n.relatedTarget!=e.control_input)return t.call(e)})),Ce(e.control_input,"blur",(()=>e.onBlur())),e.hook("before","close",(()=>{e.isOpen&&e.focus_node.focus({preventScroll:!0})}))}))}function qe(){var e=this;e.on("initialize",(()=>{var t=document.createElement("span"),n=e.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",e.wrapper.appendChild(t);var r=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const e of r)t.style[e]=n.style[e];var i=()=>{t.textContent=n.value,n.style.width=t.clientWidth+"px"};i(),e.on("update item_add item_remove",i),Ce(n,"input",i),Ce(n,"keyup",i),Ce(n,"blur",i),Ce(n,"update",i)}))}function Ue(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",(n=>!!e.activeItems.length&&t.call(e,n)))}function He(){this.hook("instead","setActiveItem",(()=>{})),this.hook("instead","selectAll",(()=>{}))}function Ke(){var e=this,t=e.onKeyDown;e.hook("instead","onKeyDown",(n=>{var r,i,s,o;if(!e.isOpen||n.keyCode!==ae&&n.keyCode!==ce)return t.call(e,n);e.ignoreHover=!0,o=Q(e.activeOption,"[data-group]"),r=Z(e.activeOption,"[data-selectable]"),o&&(o=n.keyCode===ae?o.previousSibling:o.nextSibling)&&(i=(s=o.querySelectorAll("[data-selectable]"))[Math.min(s.length-1,r)])&&e.setActiveOption(i)}))}function ze(e){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e);var n=this;if(t.append){var r='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+ye(t.title)+'">'+t.label+"</a>";n.hook("after","setupTemplates",(()=>{var e=n.settings.render.item;n.settings.render.item=(t,i)=>{var s=V(e.call(n,t,i)),o=V(r);return s.appendChild(o),Ce(o,"mousedown",(e=>{Ae(e,!0)})),Ce(o,"click",(e=>{n.isLocked||(Ae(e,!0),n.isLocked||n.shouldDelete([s],e)&&(n.removeItem(s),n.refreshOptions(!1),n.inputState()))})),s}}))}}function Ge(e){const t=this,n=Object.assign({text:e=>e[t.settings.labelField]},e);t.on("item_remove",(function(e){if(t.isFocused&&""===t.control_input.value.trim()){var r=t.options[e];r&&t.setTextboxValue(n.text.call(t,r))}}))}function We(){const e=this,t=e.canLoad,n=e.clearActiveOption,r=e.loadCallback;var i,s,o={},a=!1,l=[];if(e.settings.shouldLoadMore||(e.settings.shouldLoadMore=()=>{if(i.clientHeight/(i.scrollHeight-i.scrollTop)>.9)return!0;if(e.activeOption){var t=e.selectable();if(Array.from(t).indexOf(e.activeOption)>=t.length-2)return!0}return!1}),!e.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";e.settings.sortField=[{field:"$order"},{field:"$score"}];const c=t=>!("number"==typeof e.settings.maxOptions&&i.children.length>=e.settings.maxOptions||!(t in o)||!o[t]),u=(t,n)=>e.items.indexOf(n)>=0||l.indexOf(n)>=0;e.setNextUrl=(e,t)=>{o[e]=t},e.getUrl=t=>{if(t in o){const e=o[t];return o[t]=!1,e}return e.clearPagination(),e.settings.firstUrl.call(e,t)},e.clearPagination=()=>{o={}},e.hook("instead","clearActiveOption",(()=>{if(!a)return n.call(e)})),e.hook("instead","canLoad",(n=>n in o?c(n):t.call(e,n))),e.hook("instead","loadCallback",((t,n)=>{if(a){if(s){const n=t[0];void 0!==n&&(s.dataset.value=n[e.settings.valueField])}}else e.clearOptions(u);r.call(e,t,n),a=!1})),e.hook("after","refreshOptions",(()=>{const t=e.lastValue;var n;c(t)?(n=e.render("loading_more",{query:t}))&&(n.setAttribute("data-selectable",""),s=n):t in o&&!i.querySelector(".no-results")&&(n=e.render("no_more_results",{query:t})),n&&(z(n,e.settings.optionClass),i.append(n))})),e.on("initialize",(()=>{l=Object.keys(e.options),i=e.dropdown_content,e.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},e.settings.render),i.addEventListener("scroll",(()=>{e.settings.shouldLoadMore.call(e)&&c(e.lastValue)&&(a||(a=!0,e.load.call(e,e.lastValue)))}))}))}return Le.define("change_listener",Fe),Le.define("checkbox_options",Ne),Le.define("clear_button",Pe),Le.define("drag_drop",Re),Le.define("dropdown_header",$e),Le.define("caret_position",Be),Le.define("dropdown_input",Ve),Le.define("input_autogrow",qe),Le.define("no_backspace_delete",Ue),Le.define("no_active_items",He),Le.define("optgroup_columns",Ke),Le.define("remove_button",ze),Le.define("restore_on_backspace",Ge),Le.define("virtual_scroll",We),Le}()}}]);